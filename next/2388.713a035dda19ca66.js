(self.webpackChunkseed_tester=self.webpackChunkseed_tester||[]).push([[2388],{9662:(l,P,t)=>{var s=t(614),o=t(6330),a=TypeError;l.exports=function(u){if(s(u))return u;throw a(o(u)+" is not a function")}},9483:(l,P,t)=>{var s=t(4411),o=t(6330),a=TypeError;l.exports=function(u){if(s(u))return u;throw a(o(u)+" is not a constructor")}},6077:(l,P,t)=>{var s=t(614),o=String,a=TypeError;l.exports=function(u){if("object"==typeof u||s(u))return u;throw a("Can't set "+o(u)+" as a prototype")}},1223:(l,P,t)=>{var s=t(5112),o=t(30),a=t(3070).f,u=s("unscopables"),v=Array.prototype;null==v[u]&&a(v,u,{configurable:!0,value:o(null)}),l.exports=function(p){v[u][p]=!0}},1530:(l,P,t)=>{var s=t(8710).charAt;l.exports=function(o,a,u){return a+(u?s(o,a).length:1)}},5787:(l,P,t)=>{var s=t(7976),o=TypeError;l.exports=function(a,u){if(s(u,a))return a;throw o("Incorrect invocation")}},9670:(l,P,t)=>{var s=t(111),o=String,a=TypeError;l.exports=function(u){if(s(u))return u;throw a(o(u)+" is not an object")}},1318:(l,P,t)=>{var s=t(5656),o=t(1400),a=t(6244),u=function(v){return function(p,h,y){var R,S=s(p),m=a(S),O=o(y,m);if(v&&h!=h){for(;m>O;)if((R=S[O++])!=R)return!0}else for(;m>O;O++)if((v||O in S)&&S[O]===h)return v||O||0;return!v&&-1}};l.exports={includes:u(!0),indexOf:u(!1)}},9341:(l,P,t)=>{var s=t(7293);l.exports=function(o,a){var u=[][o];return!!u&&s(function(){u.call(null,a||function(){return 1},1)})}},1589:(l,P,t)=>{var s=t(1400),o=t(6244),a=t(6135),u=Array,v=Math.max;l.exports=function(p,h,y){for(var S=o(p),m=s(h,S),O=s(void 0===y?S:y,S),R=u(v(O-m,0)),A=0;m<O;m++,A++)a(R,A,p[m]);return R.length=A,R}},206:(l,P,t)=>{var s=t(1702);l.exports=s([].slice)},4362:(l,P,t)=>{var s=t(1589),o=Math.floor,a=function(p,h){var y=p.length,S=o(y/2);return y<8?u(p,h):v(p,a(s(p,0,S),h),a(s(p,S),h),h)},u=function(p,h){for(var m,O,y=p.length,S=1;S<y;){for(O=S,m=p[S];O&&h(p[O-1],m)>0;)p[O]=p[--O];O!==S++&&(p[O]=m)}return p},v=function(p,h,y,S){for(var m=h.length,O=y.length,R=0,A=0;R<m||A<O;)p[R+A]=R<m&&A<O?S(h[R],y[A])<=0?h[R++]:y[A++]:R<m?h[R++]:y[A++];return p};l.exports=a},7072:(l,P,t)=>{var o=t(5112)("iterator"),a=!1;try{var u=0,v={next:function(){return{done:!!u++}},return:function(){a=!0}};v[o]=function(){return this},Array.from(v,function(){throw 2})}catch{}l.exports=function(p,h){if(!h&&!a)return!1;var y=!1;try{var S={};S[o]=function(){return{next:function(){return{done:y=!0}}}},p(S)}catch{}return y}},4326:(l,P,t)=>{var s=t(1702),o=s({}.toString),a=s("".slice);l.exports=function(u){return a(o(u),8,-1)}},648:(l,P,t)=>{var s=t(1694),o=t(614),a=t(4326),v=t(5112)("toStringTag"),p=Object,h="Arguments"==a(function(){return arguments}());l.exports=s?a:function(S){var m,O,R;return void 0===S?"Undefined":null===S?"Null":"string"==typeof(O=function(S,m){try{return S[m]}catch{}}(m=p(S),v))?O:h?a(m):"Object"==(R=a(m))&&o(m.callee)?"Arguments":R}},9920:(l,P,t)=>{var s=t(2597),o=t(3887),a=t(1236),u=t(3070);l.exports=function(v,p,h){for(var y=o(p),S=u.f,m=a.f,O=0;O<y.length;O++){var R=y[O];!s(v,R)&&(!h||!s(h,R))&&S(v,R,m(p,R))}}},4964:(l,P,t)=>{var o=t(5112)("match");l.exports=function(a){var u=/./;try{"/./"[a](u)}catch{try{return u[o]=!1,"/./"[a](u)}catch{}}return!1}},8544:(l,P,t)=>{var s=t(7293);l.exports=!s(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},6178:l=>{l.exports=function(P,t){return{value:P,done:t}}},8880:(l,P,t)=>{var s=t(9781),o=t(3070),a=t(9114);l.exports=s?function(u,v,p){return o.f(u,v,a(1,p))}:function(u,v,p){return u[v]=p,u}},9114:l=>{l.exports=function(P,t){return{enumerable:!(1&P),configurable:!(2&P),writable:!(4&P),value:t}}},6135:(l,P,t)=>{var s=t(4948),o=t(3070),a=t(9114);l.exports=function(u,v,p){var h=s(v);h in u?o.f(u,h,a(0,p)):u[h]=p}},8052:(l,P,t)=>{var s=t(614),o=t(3070),a=t(6339),u=t(3072);l.exports=function(v,p,h,y){y||(y={});var S=y.enumerable,m=void 0!==y.name?y.name:p;if(s(h)&&a(h,m,y),y.global)S?v[p]=h:u(p,h);else{try{y.unsafe?v[p]&&(S=!0):delete v[p]}catch{}S?v[p]=h:o.f(v,p,{value:h,enumerable:!1,configurable:!y.nonConfigurable,writable:!y.nonWritable})}return v}},3072:(l,P,t)=>{var s=t(7854),o=Object.defineProperty;l.exports=function(a,u){try{o(s,a,{value:u,configurable:!0,writable:!0})}catch{s[a]=u}return u}},5117:(l,P,t)=>{var s=t(6330),o=TypeError;l.exports=function(a,u){if(!delete a[u])throw o("Cannot delete property "+s(u)+" of "+s(a))}},9781:(l,P,t)=>{var s=t(7293);l.exports=!s(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},2371:l=>{var P="object"==typeof document&&document.all;l.exports={all:P,IS_HTMLDDA:typeof P>"u"&&void 0!==P}},317:(l,P,t)=>{var s=t(7854),o=t(111),a=s.document,u=o(a)&&o(a.createElement);l.exports=function(v){return u?a.createElement(v):{}}},8324:l=>{l.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(l,P,t)=>{var o=t(317)("span").classList,a=o&&o.constructor&&o.constructor.prototype;l.exports=a===Object.prototype?void 0:a},8886:(l,P,t)=>{var o=t(8113).match(/firefox\/(\d+)/i);l.exports=!!o&&+o[1]},7871:(l,P,t)=>{var s=t(3823),o=t(5268);l.exports=!s&&!o&&"object"==typeof window&&"object"==typeof document},3823:l=>{l.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},256:(l,P,t)=>{var s=t(8113);l.exports=/MSIE|Trident/.test(s)},1528:(l,P,t)=>{var s=t(8113);l.exports=/ipad|iphone|ipod/i.test(s)&&typeof Pebble<"u"},6833:(l,P,t)=>{var s=t(8113);l.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},5268:(l,P,t)=>{var s=t(4326);l.exports=typeof process<"u"&&"process"==s(process)},1036:(l,P,t)=>{var s=t(8113);l.exports=/web0s(?!.*chrome)/i.test(s)},8113:l=>{l.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},7392:(l,P,t)=>{var h,y,s=t(7854),o=t(8113),a=s.process,u=s.Deno,v=a&&a.versions||u&&u.version,p=v&&v.v8;p&&(y=(h=p.split("."))[0]>0&&h[0]<4?1:+(h[0]+h[1])),!y&&o&&(!(h=o.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=o.match(/Chrome\/(\d+)/))&&(y=+h[1]),l.exports=y},8008:(l,P,t)=>{var o=t(8113).match(/AppleWebKit\/(\d+)\./);l.exports=!!o&&+o[1]},748:l=>{l.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(l,P,t)=>{var s=t(7854),o=t(1236).f,a=t(8880),u=t(8052),v=t(3072),p=t(9920),h=t(4705);l.exports=function(y,S){var x,b,N,F,w,m=y.target,O=y.global,R=y.stat;if(x=O?s:R?s[m]||v(m,{}):(s[m]||{}).prototype)for(b in S){if(F=S[b],N=y.dontCallGetSet?(w=o(x,b))&&w.value:x[b],!h(O?b:m+(R?".":"#")+b,y.forced)&&void 0!==N){if(typeof F==typeof N)continue;p(F,N)}(y.sham||N&&N.sham)&&a(F,"sham",!0),u(x,b,F,y)}}},7293:l=>{l.exports=function(P){try{return!!P()}catch{return!0}}},7007:(l,P,t)=>{t(4916);var s=t(1470),o=t(8052),a=t(2261),u=t(7293),v=t(5112),p=t(8880),h=v("species"),y=RegExp.prototype;l.exports=function(S,m,O,R){var A=v(S),x=!u(function(){var w={};return w[A]=function(){return 7},7!=""[S](w)}),b=x&&!u(function(){var w=!1,I=/a/;return"split"===S&&((I={}).constructor={},I.constructor[h]=function(){return I},I.flags="",I[A]=/./[A]),I.exec=function(){return w=!0,null},I[A](""),!w});if(!x||!b||O){var N=s(/./[A]),F=m(A,""[S],function(w,I,M,L,$){var Y=s(w),j=I.exec;return j===a||j===y.exec?x&&!$?{done:!0,value:N(I,M,L)}:{done:!0,value:Y(M,I,L)}:{done:!1}});o(String.prototype,S,F[0]),o(y,A,F[1])}R&&p(y[A],"sham",!0)}},2104:(l,P,t)=>{var s=t(4374),o=Function.prototype,a=o.apply,u=o.call;l.exports="object"==typeof Reflect&&Reflect.apply||(s?u.bind(a):function(){return u.apply(a,arguments)})},9974:(l,P,t)=>{var s=t(1470),o=t(9662),a=t(4374),u=s(s.bind);l.exports=function(v,p){return o(v),void 0===p?v:a?u(v,p):function(){return v.apply(p,arguments)}}},4374:(l,P,t)=>{var s=t(7293);l.exports=!s(function(){var o=function(){}.bind();return"function"!=typeof o||o.hasOwnProperty("prototype")})},6916:(l,P,t)=>{var s=t(4374),o=Function.prototype.call;l.exports=s?o.bind(o):function(){return o.apply(o,arguments)}},6530:(l,P,t)=>{var s=t(9781),o=t(2597),a=Function.prototype,u=s&&Object.getOwnPropertyDescriptor,v=o(a,"name"),p=v&&"something"===function(){}.name,h=v&&(!s||s&&u(a,"name").configurable);l.exports={EXISTS:v,PROPER:p,CONFIGURABLE:h}},1470:(l,P,t)=>{var s=t(4326),o=t(1702);l.exports=function(a){if("Function"===s(a))return o(a)}},1702:(l,P,t)=>{var s=t(4374),o=Function.prototype,a=o.call,u=s&&o.bind.bind(a,a);l.exports=s?u:function(v){return function(){return a.apply(v,arguments)}}},5005:(l,P,t)=>{var s=t(7854),o=t(614),a=function(u){return o(u)?u:void 0};l.exports=function(u,v){return arguments.length<2?a(s[u]):s[u]&&s[u][v]}},1246:(l,P,t)=>{var s=t(648),o=t(8173),a=t(8554),u=t(7497),p=t(5112)("iterator");l.exports=function(h){if(!a(h))return o(h,p)||o(h,"@@iterator")||u[s(h)]}},4121:(l,P,t)=>{var s=t(6916),o=t(9662),a=t(9670),u=t(6330),v=t(1246),p=TypeError;l.exports=function(h,y){var S=arguments.length<2?v(h):y;if(o(S))return a(s(S,h));throw p(u(h)+" is not iterable")}},8173:(l,P,t)=>{var s=t(9662),o=t(8554);l.exports=function(a,u){var v=a[u];return o(v)?void 0:s(v)}},647:(l,P,t)=>{var s=t(1702),o=t(7908),a=Math.floor,u=s("".charAt),v=s("".replace),p=s("".slice),h=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,y=/\$([$&'`]|\d{1,2})/g;l.exports=function(S,m,O,R,A,x){var b=O+S.length,N=R.length,F=y;return void 0!==A&&(A=o(A),F=h),v(x,F,function(w,I){var M;switch(u(I,0)){case"$":return"$";case"&":return S;case"`":return p(m,0,O);case"'":return p(m,b);case"<":M=A[p(I,1,-1)];break;default:var L=+I;if(0===L)return w;if(L>N){var $=a(L/10);return 0===$?w:$<=N?void 0===R[$-1]?u(I,1):R[$-1]+u(I,1):w}M=R[L-1]}return void 0===M?"":M})}},7854:l=>{var P=function(t){return t&&t.Math==Math&&t};l.exports=P("object"==typeof globalThis&&globalThis)||P("object"==typeof window&&window)||P("object"==typeof self&&self)||P("object"==typeof global&&global)||function(){return this}()||Function("return this")()},2597:(l,P,t)=>{var s=t(1702),o=t(7908),a=s({}.hasOwnProperty);l.exports=Object.hasOwn||function(v,p){return a(o(v),p)}},3501:l=>{l.exports={}},842:l=>{l.exports=function(P,t){try{1==arguments.length?console.error(P):console.error(P,t)}catch{}}},490:(l,P,t)=>{var s=t(5005);l.exports=s("document","documentElement")},4664:(l,P,t)=>{var s=t(9781),o=t(7293),a=t(317);l.exports=!s&&!o(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},8361:(l,P,t)=>{var s=t(1702),o=t(7293),a=t(4326),u=Object,v=s("".split);l.exports=o(function(){return!u("z").propertyIsEnumerable(0)})?function(p){return"String"==a(p)?v(p,""):u(p)}:u},2788:(l,P,t)=>{var s=t(1702),o=t(614),a=t(5465),u=s(Function.toString);o(a.inspectSource)||(a.inspectSource=function(v){return u(v)}),l.exports=a.inspectSource},9909:(l,P,t)=>{var R,A,x,s=t(4811),o=t(7854),a=t(111),u=t(8880),v=t(2597),p=t(5465),h=t(6200),y=t(3501),S="Object already initialized",m=o.TypeError;if(s||p.state){var F=p.state||(p.state=new(0,o.WeakMap));F.get=F.get,F.has=F.has,F.set=F.set,R=function(I,M){if(F.has(I))throw m(S);return M.facade=I,F.set(I,M),M},A=function(I){return F.get(I)||{}},x=function(I){return F.has(I)}}else{var w=h("state");y[w]=!0,R=function(I,M){if(v(I,w))throw m(S);return M.facade=I,u(I,w,M),M},A=function(I){return v(I,w)?I[w]:{}},x=function(I){return v(I,w)}}l.exports={set:R,get:A,has:x,enforce:function(I){return x(I)?A(I):R(I,{})},getterFor:function(I){return function(M){var L;if(!a(M)||(L=A(M)).type!==I)throw m("Incompatible receiver, "+I+" required");return L}}}},7659:(l,P,t)=>{var s=t(5112),o=t(7497),a=s("iterator"),u=Array.prototype;l.exports=function(v){return void 0!==v&&(o.Array===v||u[a]===v)}},614:(l,P,t)=>{var s=t(2371),o=s.all;l.exports=s.IS_HTMLDDA?function(a){return"function"==typeof a||a===o}:function(a){return"function"==typeof a}},4411:(l,P,t)=>{var s=t(1702),o=t(7293),a=t(614),u=t(648),v=t(5005),p=t(2788),h=function(){},y=[],S=v("Reflect","construct"),m=/^\s*(?:class|function)\b/,O=s(m.exec),R=!m.exec(h),A=function(N){if(!a(N))return!1;try{return S(h,y,N),!0}catch{return!1}},x=function(N){if(!a(N))return!1;switch(u(N)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return R||!!O(m,p(N))}catch{return!0}};x.sham=!0,l.exports=!S||o(function(){var b;return A(A.call)||!A(Object)||!A(function(){b=!0})||b})?x:A},4705:(l,P,t)=>{var s=t(7293),o=t(614),a=/#|\.prototype\./,u=function(S,m){var O=p[v(S)];return O==y||O!=h&&(o(m)?s(m):!!m)},v=u.normalize=function(S){return String(S).replace(a,".").toLowerCase()},p=u.data={},h=u.NATIVE="N",y=u.POLYFILL="P";l.exports=u},8554:l=>{l.exports=function(P){return null==P}},111:(l,P,t)=>{var s=t(614),o=t(2371),a=o.all;l.exports=o.IS_HTMLDDA?function(u){return"object"==typeof u?null!==u:s(u)||u===a}:function(u){return"object"==typeof u?null!==u:s(u)}},1913:l=>{l.exports=!1},7850:(l,P,t)=>{var s=t(111),o=t(4326),u=t(5112)("match");l.exports=function(v){var p;return s(v)&&(void 0!==(p=v[u])?!!p:"RegExp"==o(v))}},2190:(l,P,t)=>{var s=t(5005),o=t(614),a=t(7976),u=t(3307),v=Object;l.exports=u?function(p){return"symbol"==typeof p}:function(p){var h=s("Symbol");return o(h)&&a(h.prototype,v(p))}},408:(l,P,t)=>{var s=t(9974),o=t(6916),a=t(9670),u=t(6330),v=t(7659),p=t(6244),h=t(7976),y=t(4121),S=t(1246),m=t(9212),O=TypeError,R=function(x,b){this.stopped=x,this.result=b},A=R.prototype;l.exports=function(x,b,N){var Y,j,J,Q,q,_,re,w=!(!N||!N.AS_ENTRIES),I=!(!N||!N.IS_RECORD),M=!(!N||!N.IS_ITERATOR),L=!(!N||!N.INTERRUPTED),$=s(b,N&&N.that),X=function(Z){return Y&&m(Y,"normal",Z),new R(!0,Z)},V=function(Z){return w?(a(Z),L?$(Z[0],Z[1],X):$(Z[0],Z[1])):L?$(Z,X):$(Z)};if(I)Y=x.iterator;else if(M)Y=x;else{if(!(j=S(x)))throw O(u(x)+" is not iterable");if(v(j)){for(J=0,Q=p(x);Q>J;J++)if((q=V(x[J]))&&h(A,q))return q;return new R(!1)}Y=y(x,j)}for(_=I?x.next:Y.next;!(re=o(_,Y)).done;){try{q=V(re.value)}catch(Z){m(Y,"throw",Z)}if("object"==typeof q&&q&&h(A,q))return q}return new R(!1)}},9212:(l,P,t)=>{var s=t(6916),o=t(9670),a=t(8173);l.exports=function(u,v,p){var h,y;o(u);try{if(!(h=a(u,"return"))){if("throw"===v)throw p;return p}h=s(h,u)}catch(S){y=!0,h=S}if("throw"===v)throw p;if(y)throw h;return o(h),p}},3061:(l,P,t)=>{var s=t(3383).IteratorPrototype,o=t(30),a=t(9114),u=t(8003),v=t(7497),p=function(){return this};l.exports=function(h,y,S,m){var O=y+" Iterator";return h.prototype=o(s,{next:a(+!m,S)}),u(h,O,!1,!0),v[O]=p,h}},1656:(l,P,t)=>{var s=t(2109),o=t(6916),a=t(1913),u=t(6530),v=t(614),p=t(3061),h=t(9518),y=t(7674),S=t(8003),m=t(8880),O=t(8052),R=t(5112),A=t(7497),x=t(3383),b=u.PROPER,N=u.CONFIGURABLE,F=x.IteratorPrototype,w=x.BUGGY_SAFARI_ITERATORS,I=R("iterator"),M="keys",L="values",$="entries",Y=function(){return this};l.exports=function(j,J,Q,q,_,re,X){p(Q,J,q);var de,Ee,me,V=function(ce){if(ce===_&&ie)return ie;if(!w&&ce in z)return z[ce];switch(ce){case M:case L:case $:return function(){return new Q(this,ce)}}return function(){return new Q(this)}},Z=J+" Iterator",se=!1,z=j.prototype,oe=z[I]||z["@@iterator"]||_&&z[_],ie=!w&&oe||V(_),H="Array"==J&&z.entries||oe;if(H&&(de=h(H.call(new j)))!==Object.prototype&&de.next&&(!a&&h(de)!==F&&(y?y(de,F):v(de[I])||O(de,I,Y)),S(de,Z,!0,!0),a&&(A[Z]=Y)),b&&_==L&&oe&&oe.name!==L&&(!a&&N?m(z,"name",L):(se=!0,ie=function(){return o(oe,this)})),_)if(Ee={values:V(L),keys:re?ie:V(M),entries:V($)},X)for(me in Ee)(w||se||!(me in z))&&O(z,me,Ee[me]);else s({target:J,proto:!0,forced:w||se},Ee);return(!a||X)&&z[I]!==ie&&O(z,I,ie,{name:_}),A[J]=ie,Ee}},3383:(l,P,t)=>{var O,R,A,s=t(7293),o=t(614),a=t(111),u=t(30),v=t(9518),p=t(8052),h=t(5112),y=t(1913),S=h("iterator"),m=!1;[].keys&&("next"in(A=[].keys())?(R=v(v(A)))!==Object.prototype&&(O=R):m=!0),!a(O)||s(function(){var b={};return O[S].call(b)!==b})?O={}:y&&(O=u(O)),o(O[S])||p(O,S,function(){return this}),l.exports={IteratorPrototype:O,BUGGY_SAFARI_ITERATORS:m}},7497:l=>{l.exports={}},6244:(l,P,t)=>{var s=t(7466);l.exports=function(o){return s(o.length)}},6339:(l,P,t)=>{var s=t(1702),o=t(7293),a=t(614),u=t(2597),v=t(9781),p=t(6530).CONFIGURABLE,h=t(2788),y=t(9909),S=y.enforce,m=y.get,O=String,R=Object.defineProperty,A=s("".slice),x=s("".replace),b=s([].join),N=v&&!o(function(){return 8!==R(function(){},"length",{value:8}).length}),F=String(String).split("String"),w=l.exports=function(I,M,L){"Symbol("===A(O(M),0,7)&&(M="["+x(O(M),/^Symbol\(([^)]*)\)/,"$1")+"]"),L&&L.getter&&(M="get "+M),L&&L.setter&&(M="set "+M),(!u(I,"name")||p&&I.name!==M)&&(v?R(I,"name",{value:M,configurable:!0}):I.name=M),N&&L&&u(L,"arity")&&I.length!==L.arity&&R(I,"length",{value:L.arity});try{L&&u(L,"constructor")&&L.constructor?v&&R(I,"prototype",{writable:!1}):I.prototype&&(I.prototype=void 0)}catch{}var $=S(I);return u($,"source")||($.source=b(F,"string"==typeof M?M:"")),I};Function.prototype.toString=w(function(){return a(this)&&m(this).source||h(this)},"toString")},4758:l=>{var P=Math.ceil,t=Math.floor;l.exports=Math.trunc||function(o){var a=+o;return(a>0?t:P)(a)}},5948:(l,P,t)=>{var N,F,w,I,M,s=t(7854),o=t(9974),a=t(1236).f,u=t(261).set,v=t(3354),p=t(6833),h=t(1528),y=t(1036),S=t(5268),m=s.MutationObserver||s.WebKitMutationObserver,O=s.document,R=s.process,A=s.Promise,x=a(s,"queueMicrotask"),b=x&&x.value;if(!b){var L=new v,$=function(){var Y,j;for(S&&(Y=R.domain)&&Y.exit();j=L.get();)try{j()}catch(J){throw L.head&&N(),J}Y&&Y.enter()};p||S||y||!m||!O?!h&&A&&A.resolve?((I=A.resolve(void 0)).constructor=A,M=o(I.then,I),N=function(){M($)}):S?N=function(){R.nextTick($)}:(u=o(u,s),N=function(){u($)}):(F=!0,w=O.createTextNode(""),new m($).observe(w,{characterData:!0}),N=function(){w.data=F=!F}),b=function(Y){L.head||N(),L.add(Y)}}l.exports=b},8523:(l,P,t)=>{var s=t(9662),o=TypeError,a=function(u){var v,p;this.promise=new u(function(h,y){if(void 0!==v||void 0!==p)throw o("Bad Promise constructor");v=h,p=y}),this.resolve=s(v),this.reject=s(p)};l.exports.f=function(u){return new a(u)}},3929:(l,P,t)=>{var s=t(7850),o=TypeError;l.exports=function(a){if(s(a))throw o("The method doesn't accept regular expressions");return a}},30:(l,P,t)=>{var F,s=t(9670),o=t(6048),a=t(748),u=t(3501),v=t(490),p=t(317),h=t(6200),m="prototype",O="script",R=h("IE_PROTO"),A=function(){},x=function(I){return"<"+O+">"+I+"</"+O+">"},b=function(I){I.write(x("")),I.close();var M=I.parentWindow.Object;return I=null,M},w=function(){try{F=new ActiveXObject("htmlfile")}catch{}w=typeof document<"u"?document.domain&&F?b(F):function(){var L,I=p("iframe"),M="java"+O+":";return I.style.display="none",v.appendChild(I),I.src=String(M),(L=I.contentWindow.document).open(),L.write(x("document.F=Object")),L.close(),L.F}():b(F);for(var I=a.length;I--;)delete w[m][a[I]];return w()};u[R]=!0,l.exports=Object.create||function(M,L){var $;return null!==M?(A[m]=s(M),$=new A,A[m]=null,$[R]=M):$=w(),void 0===L?$:o.f($,L)}},6048:(l,P,t)=>{var s=t(9781),o=t(3353),a=t(3070),u=t(9670),v=t(5656),p=t(1956);P.f=s&&!o?Object.defineProperties:function(y,S){u(y);for(var x,m=v(S),O=p(S),R=O.length,A=0;R>A;)a.f(y,x=O[A++],m[x]);return y}},3070:(l,P,t)=>{var s=t(9781),o=t(4664),a=t(3353),u=t(9670),v=t(4948),p=TypeError,h=Object.defineProperty,y=Object.getOwnPropertyDescriptor,S="enumerable",m="configurable",O="writable";P.f=s?a?function(A,x,b){if(u(A),x=v(x),u(b),"function"==typeof A&&"prototype"===x&&"value"in b&&O in b&&!b[O]){var N=y(A,x);N&&N[O]&&(A[x]=b.value,b={configurable:m in b?b[m]:N[m],enumerable:S in b?b[S]:N[S],writable:!1})}return h(A,x,b)}:h:function(A,x,b){if(u(A),x=v(x),u(b),o)try{return h(A,x,b)}catch{}if("get"in b||"set"in b)throw p("Accessors not supported");return"value"in b&&(A[x]=b.value),A}},1236:(l,P,t)=>{var s=t(9781),o=t(6916),a=t(5296),u=t(9114),v=t(5656),p=t(4948),h=t(2597),y=t(4664),S=Object.getOwnPropertyDescriptor;P.f=s?S:function(O,R){if(O=v(O),R=p(R),y)try{return S(O,R)}catch{}if(h(O,R))return u(!o(a.f,O,R),O[R])}},8006:(l,P,t)=>{var s=t(6324),a=t(748).concat("length","prototype");P.f=Object.getOwnPropertyNames||function(v){return s(v,a)}},5181:(l,P)=>{P.f=Object.getOwnPropertySymbols},9518:(l,P,t)=>{var s=t(2597),o=t(614),a=t(7908),u=t(6200),v=t(8544),p=u("IE_PROTO"),h=Object,y=h.prototype;l.exports=v?h.getPrototypeOf:function(S){var m=a(S);if(s(m,p))return m[p];var O=m.constructor;return o(O)&&m instanceof O?O.prototype:m instanceof h?y:null}},7976:(l,P,t)=>{var s=t(1702);l.exports=s({}.isPrototypeOf)},6324:(l,P,t)=>{var s=t(1702),o=t(2597),a=t(5656),u=t(1318).indexOf,v=t(3501),p=s([].push);l.exports=function(h,y){var R,S=a(h),m=0,O=[];for(R in S)!o(v,R)&&o(S,R)&&p(O,R);for(;y.length>m;)o(S,R=y[m++])&&(~u(O,R)||p(O,R));return O}},1956:(l,P,t)=>{var s=t(6324),o=t(748);l.exports=Object.keys||function(u){return s(u,o)}},5296:(l,P)=>{var t={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!t.call({1:2},1);P.f=o?function(u){var v=s(this,u);return!!v&&v.enumerable}:t},7674:(l,P,t)=>{var s=t(1702),o=t(9670),a=t(6077);l.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var p,u=!1,v={};try{(p=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(v,[]),u=v instanceof Array}catch{}return function(y,S){return o(y),a(S),u?p(y,S):y.__proto__=S,y}}():void 0)},2140:(l,P,t)=>{var s=t(6916),o=t(614),a=t(111),u=TypeError;l.exports=function(v,p){var h,y;if("string"===p&&o(h=v.toString)&&!a(y=s(h,v))||o(h=v.valueOf)&&!a(y=s(h,v))||"string"!==p&&o(h=v.toString)&&!a(y=s(h,v)))return y;throw u("Can't convert object to primitive value")}},3887:(l,P,t)=>{var s=t(5005),o=t(1702),a=t(8006),u=t(5181),v=t(9670),p=o([].concat);l.exports=s("Reflect","ownKeys")||function(y){var S=a.f(v(y)),m=u.f;return m?p(S,m(y)):S}},2534:l=>{l.exports=function(P){try{return{error:!1,value:P()}}catch(t){return{error:!0,value:t}}}},3702:(l,P,t)=>{var s=t(7854),o=t(2492),a=t(614),u=t(4705),v=t(2788),p=t(5112),h=t(7871),y=t(3823),S=t(1913),m=t(7392),O=o&&o.prototype,R=p("species"),A=!1,x=a(s.PromiseRejectionEvent),b=u("Promise",function(){var N=v(o),F=N!==String(o);if(!F&&66===m||S&&(!O.catch||!O.finally))return!0;if(!m||m<51||!/native code/.test(N)){var w=new o(function(L){L(1)}),I=function(L){L(function(){},function(){})};if((w.constructor={})[R]=I,!(A=w.then(function(){})instanceof I))return!0}return!F&&(h||y)&&!x});l.exports={CONSTRUCTOR:b,REJECTION_EVENT:x,SUBCLASSING:A}},2492:(l,P,t)=>{var s=t(7854);l.exports=s.Promise},9478:(l,P,t)=>{var s=t(9670),o=t(111),a=t(8523);l.exports=function(u,v){if(s(u),o(v)&&v.constructor===u)return v;var p=a.f(u);return(0,p.resolve)(v),p.promise}},612:(l,P,t)=>{var s=t(2492),o=t(7072),a=t(3702).CONSTRUCTOR;l.exports=a||!o(function(u){s.all(u).then(void 0,function(){})})},3354:l=>{var P=function(){this.head=null,this.tail=null};P.prototype={add:function(t){var s={item:t,next:null},o=this.tail;o?o.next=s:this.head=s,this.tail=s},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},l.exports=P},7651:(l,P,t)=>{var s=t(6916),o=t(9670),a=t(614),u=t(4326),v=t(2261),p=TypeError;l.exports=function(h,y){var S=h.exec;if(a(S)){var m=s(S,h,y);return null!==m&&o(m),m}if("RegExp"===u(h))return s(v,h,y);throw p("RegExp#exec called on incompatible receiver")}},2261:(l,P,t)=>{var $,Y,s=t(6916),o=t(1702),a=t(1340),u=t(7066),v=t(2999),p=t(2309),h=t(30),y=t(9909).get,S=t(9441),m=t(7168),O=p("native-string-replace",String.prototype.replace),R=RegExp.prototype.exec,A=R,x=o("".charAt),b=o("".indexOf),N=o("".replace),F=o("".slice),w=(Y=/b*/g,s(R,$=/a/,"a"),s(R,Y,"a"),0!==$.lastIndex||0!==Y.lastIndex),I=v.BROKEN_CARET,M=void 0!==/()??/.exec("")[1];(w||M||I||S||m)&&(A=function(Y){var _,re,X,V,Z,se,z,j=this,J=y(j),Q=a(Y),q=J.raw;if(q)return q.lastIndex=j.lastIndex,_=s(A,q,Q),j.lastIndex=q.lastIndex,_;var oe=J.groups,ie=I&&j.sticky,H=s(u,j),de=j.source,Ee=0,me=Q;if(ie&&(H=N(H,"y",""),-1===b(H,"g")&&(H+="g"),me=F(Q,j.lastIndex),j.lastIndex>0&&(!j.multiline||j.multiline&&"\n"!==x(Q,j.lastIndex-1))&&(de="(?: "+de+")",me=" "+me,Ee++),re=new RegExp("^(?:"+de+")",H)),M&&(re=new RegExp("^"+de+"$(?!\\s)",H)),w&&(X=j.lastIndex),V=s(R,ie?re:j,me),ie?V?(V.input=F(V.input,Ee),V[0]=F(V[0],Ee),V.index=j.lastIndex,j.lastIndex+=V[0].length):j.lastIndex=0:w&&V&&(j.lastIndex=j.global?V.index+V[0].length:X),M&&V&&V.length>1&&s(O,V[0],re,function(){for(Z=1;Z<arguments.length-2;Z++)void 0===arguments[Z]&&(V[Z]=void 0)}),V&&oe)for(V.groups=se=h(null),Z=0;Z<oe.length;Z++)se[(z=oe[Z])[0]]=V[z[1]];return V}),l.exports=A},7066:(l,P,t)=>{var s=t(9670);l.exports=function(){var o=s(this),a="";return o.hasIndices&&(a+="d"),o.global&&(a+="g"),o.ignoreCase&&(a+="i"),o.multiline&&(a+="m"),o.dotAll&&(a+="s"),o.unicode&&(a+="u"),o.unicodeSets&&(a+="v"),o.sticky&&(a+="y"),a}},2999:(l,P,t)=>{var s=t(7293),a=t(7854).RegExp,u=s(function(){var h=a("a","y");return h.lastIndex=2,null!=h.exec("abcd")}),v=u||s(function(){return!a("a","y").sticky}),p=u||s(function(){var h=a("^r","gy");return h.lastIndex=2,null!=h.exec("str")});l.exports={BROKEN_CARET:p,MISSED_STICKY:v,UNSUPPORTED_Y:u}},9441:(l,P,t)=>{var s=t(7293),a=t(7854).RegExp;l.exports=s(function(){var u=a(".","s");return!(u.dotAll&&u.exec("\n")&&"s"===u.flags)})},7168:(l,P,t)=>{var s=t(7293),a=t(7854).RegExp;l.exports=s(function(){var u=a("(?<a>b)","g");return"b"!==u.exec("b").groups.a||"bc"!=="b".replace(u,"$<a>c")})},4488:(l,P,t)=>{var s=t(8554),o=TypeError;l.exports=function(a){if(s(a))throw o("Can't call method on "+a);return a}},6340:(l,P,t)=>{var s=t(5005),o=t(3070),a=t(5112),u=t(9781),v=a("species");l.exports=function(p){var h=s(p);u&&h&&!h[v]&&(0,o.f)(h,v,{configurable:!0,get:function(){return this}})}},8003:(l,P,t)=>{var s=t(3070).f,o=t(2597),u=t(5112)("toStringTag");l.exports=function(v,p,h){v&&!h&&(v=v.prototype),v&&!o(v,u)&&s(v,u,{configurable:!0,value:p})}},6200:(l,P,t)=>{var s=t(2309),o=t(9711),a=s("keys");l.exports=function(u){return a[u]||(a[u]=o(u))}},5465:(l,P,t)=>{var s=t(7854),o=t(3072),a="__core-js_shared__",u=s[a]||o(a,{});l.exports=u},2309:(l,P,t)=>{var s=t(1913),o=t(5465);(l.exports=function(a,u){return o[a]||(o[a]=void 0!==u?u:{})})("versions",[]).push({version:"3.27.2",mode:s?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(l,P,t)=>{var s=t(9670),o=t(9483),a=t(8554),v=t(5112)("species");l.exports=function(p,h){var S,y=s(p).constructor;return void 0===y||a(S=s(y)[v])?h:o(S)}},8710:(l,P,t)=>{var s=t(1702),o=t(9303),a=t(1340),u=t(4488),v=s("".charAt),p=s("".charCodeAt),h=s("".slice),y=function(S){return function(m,O){var b,N,R=a(u(m)),A=o(O),x=R.length;return A<0||A>=x?S?"":void 0:(b=p(R,A))<55296||b>56319||A+1===x||(N=p(R,A+1))<56320||N>57343?S?v(R,A):b:S?h(R,A,A+2):N-56320+(b-55296<<10)+65536}};l.exports={codeAt:y(!1),charAt:y(!0)}},6293:(l,P,t)=>{var s=t(7392),o=t(7293);l.exports=!!Object.getOwnPropertySymbols&&!o(function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&s&&s<41})},261:(l,P,t)=>{var Y,j,J,Q,s=t(7854),o=t(2104),a=t(9974),u=t(614),v=t(2597),p=t(7293),h=t(490),y=t(206),S=t(317),m=t(8053),O=t(6833),R=t(5268),A=s.setImmediate,x=s.clearImmediate,b=s.process,N=s.Dispatch,F=s.Function,w=s.MessageChannel,I=s.String,M=0,L={},$="onreadystatechange";p(function(){Y=s.location});var q=function(V){if(v(L,V)){var Z=L[V];delete L[V],Z()}},_=function(V){return function(){q(V)}},re=function(V){q(V.data)},X=function(V){s.postMessage(I(V),Y.protocol+"//"+Y.host)};(!A||!x)&&(A=function(Z){m(arguments.length,1);var se=u(Z)?Z:F(Z),z=y(arguments,1);return L[++M]=function(){o(se,void 0,z)},j(M),M},x=function(Z){delete L[Z]},R?j=function(V){b.nextTick(_(V))}:N&&N.now?j=function(V){N.now(_(V))}:w&&!O?(Q=(J=new w).port2,J.port1.onmessage=re,j=a(Q.postMessage,Q)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&Y&&"file:"!==Y.protocol&&!p(X)?(j=X,s.addEventListener("message",re,!1)):j=$ in S("script")?function(V){h.appendChild(S("script"))[$]=function(){h.removeChild(this),q(V)}}:function(V){setTimeout(_(V),0)}),l.exports={set:A,clear:x}},1400:(l,P,t)=>{var s=t(9303),o=Math.max,a=Math.min;l.exports=function(u,v){var p=s(u);return p<0?o(p+v,0):a(p,v)}},5656:(l,P,t)=>{var s=t(8361),o=t(4488);l.exports=function(a){return s(o(a))}},9303:(l,P,t)=>{var s=t(4758);l.exports=function(o){var a=+o;return a!=a||0===a?0:s(a)}},7466:(l,P,t)=>{var s=t(9303),o=Math.min;l.exports=function(a){return a>0?o(s(a),9007199254740991):0}},7908:(l,P,t)=>{var s=t(4488),o=Object;l.exports=function(a){return o(s(a))}},7593:(l,P,t)=>{var s=t(6916),o=t(111),a=t(2190),u=t(8173),v=t(2140),p=t(5112),h=TypeError,y=p("toPrimitive");l.exports=function(S,m){if(!o(S)||a(S))return S;var R,O=u(S,y);if(O){if(void 0===m&&(m="default"),R=s(O,S,m),!o(R)||a(R))return R;throw h("Can't convert object to primitive value")}return void 0===m&&(m="number"),v(S,m)}},4948:(l,P,t)=>{var s=t(7593),o=t(2190);l.exports=function(a){var u=s(a,"string");return o(u)?u:u+""}},1694:(l,P,t)=>{var a={};a[t(5112)("toStringTag")]="z",l.exports="[object z]"===String(a)},1340:(l,P,t)=>{var s=t(648),o=String;l.exports=function(a){if("Symbol"===s(a))throw TypeError("Cannot convert a Symbol value to a string");return o(a)}},6330:l=>{var P=String;l.exports=function(t){try{return P(t)}catch{return"Object"}}},9711:(l,P,t)=>{var s=t(1702),o=0,a=Math.random(),u=s(1..toString);l.exports=function(v){return"Symbol("+(void 0===v?"":v)+")_"+u(++o+a,36)}},3307:(l,P,t)=>{var s=t(6293);l.exports=s&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(l,P,t)=>{var s=t(9781),o=t(7293);l.exports=s&&o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8053:l=>{var P=TypeError;l.exports=function(t,s){if(t<s)throw P("Not enough arguments");return t}},4811:(l,P,t)=>{var s=t(7854),o=t(614),a=s.WeakMap;l.exports=o(a)&&/native code/.test(String(a))},5112:(l,P,t)=>{var s=t(7854),o=t(2309),a=t(2597),u=t(9711),v=t(6293),p=t(3307),h=s.Symbol,y=o("wks"),S=p?h.for||h:h&&h.withoutSetter||u;l.exports=function(m){return a(y,m)||(y[m]=v&&a(h,m)?h[m]:S("Symbol."+m)),y[m]}},6699:(l,P,t)=>{var s=t(2109),o=t(1318).includes,a=t(7293),u=t(1223);s({target:"Array",proto:!0,forced:a(function(){return!Array(1).includes()})},{includes:function(h){return o(this,h,arguments.length>1?arguments[1]:void 0)}}),u("includes")},6992:(l,P,t)=>{var s=t(5656),o=t(1223),a=t(7497),u=t(9909),v=t(3070).f,p=t(1656),h=t(6178),y=t(1913),S=t(9781),m="Array Iterator",O=u.set,R=u.getterFor(m);l.exports=p(Array,"Array",function(x,b){O(this,{type:m,target:s(x),index:0,kind:b})},function(){var x=R(this),b=x.target,N=x.kind,F=x.index++;return!b||F>=b.length?(x.target=void 0,h(void 0,!0)):h("keys"==N?F:"values"==N?b[F]:[F,b[F]],!1)},"values");var A=a.Arguments=a.Array;if(o("keys"),o("values"),o("entries"),!y&&S&&"values"!==A.name)try{v(A,"name",{value:"values"})}catch{}},2707:(l,P,t)=>{var s=t(2109),o=t(1702),a=t(9662),u=t(7908),v=t(6244),p=t(5117),h=t(1340),y=t(7293),S=t(4362),m=t(9341),O=t(8886),R=t(256),A=t(7392),x=t(8008),b=[],N=o(b.sort),F=o(b.push),w=y(function(){b.sort(void 0)}),I=y(function(){b.sort(null)}),M=m("sort"),L=!y(function(){if(A)return A<70;if(!(O&&O>3)){if(R)return!0;if(x)return x<603;var J,Q,q,_,j="";for(J=65;J<76;J++){switch(Q=String.fromCharCode(J),J){case 66:case 69:case 70:case 72:q=3;break;case 68:case 71:q=4;break;default:q=2}for(_=0;_<47;_++)b.push({k:Q+_,v:q})}for(b.sort(function(re,X){return X.v-re.v}),_=0;_<b.length;_++)Q=b[_].k.charAt(0),j.charAt(j.length-1)!==Q&&(j+=Q);return"DGBEFHACIJK"!==j}});s({target:"Array",proto:!0,forced:w||!I||!M||!L},{sort:function(J){void 0!==J&&a(J);var Q=u(this);if(L)return void 0===J?N(Q):N(Q,J);var re,X,q=[],_=v(Q);for(X=0;X<_;X++)X in Q&&F(q,Q[X]);for(S(q,function(j){return function(J,Q){return void 0===Q?-1:void 0===J?1:void 0!==j?+j(J,Q)||0:h(J)>h(Q)?1:-1}}(J)),re=v(q),X=0;X<re;)Q[X]=q[X++];for(;X<_;)p(Q,X++);return Q}})},821:(l,P,t)=>{var s=t(2109),o=t(6916),a=t(9662),u=t(8523),v=t(2534),p=t(408);s({target:"Promise",stat:!0,forced:t(612)},{all:function(S){var m=this,O=u.f(m),R=O.resolve,A=O.reject,x=v(function(){var b=a(m.resolve),N=[],F=0,w=1;p(S,function(I){var M=F++,L=!1;w++,o(b,m,I).then(function($){L||(L=!0,N[M]=$,--w||R(N))},A)}),--w||R(N)});return x.error&&A(x.value),O.promise}})},4164:(l,P,t)=>{var s=t(2109),o=t(1913),a=t(3702).CONSTRUCTOR,u=t(2492),v=t(5005),p=t(614),h=t(8052),y=u&&u.prototype;if(s({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(m){return this.then(void 0,m)}}),!o&&p(u)){var S=v("Promise").prototype.catch;y.catch!==S&&h(y,"catch",S,{unsafe:!0})}},3401:(l,P,t)=>{var Te,Fe,Me,s=t(2109),o=t(1913),a=t(5268),u=t(7854),v=t(6916),p=t(8052),h=t(7674),y=t(8003),S=t(6340),m=t(9662),O=t(614),R=t(111),A=t(5787),x=t(6707),b=t(261).set,N=t(5948),F=t(842),w=t(2534),I=t(3354),M=t(9909),L=t(2492),$=t(3702),Y=t(8523),j="Promise",J=$.CONSTRUCTOR,Q=$.REJECTION_EVENT,q=$.SUBCLASSING,_=M.getterFor(j),re=M.set,X=L&&L.prototype,V=L,Z=X,se=u.TypeError,z=u.document,oe=u.process,ie=Y.f,H=ie,de=!!(z&&z.createEvent&&u.dispatchEvent),Ee="unhandledrejection",E=function(G){var K;return!(!R(G)||!O(K=G.then))&&K},Ie=function(G,K){var he,W,Ve,te=K.value,k=1==K.state,ae=k?G.ok:G.fail,we=G.resolve,$e=G.reject,Ue=G.domain;try{ae?(k||(2===K.rejection&&ze(K),K.rejection=1),!0===ae?he=te:(Ue&&Ue.enter(),he=ae(te),Ue&&(Ue.exit(),Ve=!0)),he===G.promise?$e(se("Promise-chain cycle")):(W=E(he))?v(W,he,we,$e):we(he)):$e(te)}catch(Oe){Ue&&!Ve&&Ue.exit(),$e(Oe)}},ue=function(G,K){G.notified||(G.notified=!0,N(function(){for(var k,te=G.reactions;k=te.get();)Ie(k,G);G.notified=!1,K&&!G.rejection&&Ke(G)}))},Ge=function(G,K,te){var k,ae;de?((k=z.createEvent("Event")).promise=K,k.reason=te,k.initEvent(G,!1,!0),u.dispatchEvent(k)):k={promise:K,reason:te},!Q&&(ae=u["on"+G])?ae(k):G===Ee&&F("Unhandled promise rejection",te)},Ke=function(G){v(b,u,function(){var ae,K=G.facade,te=G.value;if(We(G)&&(ae=w(function(){a?oe.emit("unhandledRejection",te,K):Ge(Ee,K,te)}),G.rejection=a||We(G)?2:1,ae.error))throw ae.value})},We=function(G){return 1!==G.rejection&&!G.parent},ze=function(G){v(b,u,function(){var K=G.facade;a?oe.emit("rejectionHandled",K):Ge("rejectionhandled",K,G.value)})},xe=function(G,K,te){return function(k){G(K,k,te)}},Se=function(G,K,te){G.done||(G.done=!0,te&&(G=te),G.value=K,G.state=2,ue(G,!0))},Le=function(G,K,te){if(!G.done){G.done=!0,te&&(G=te);try{if(G.facade===K)throw se("Promise can't be resolved itself");var k=E(K);k?N(function(){var ae={done:!1};try{v(k,K,xe(Le,ae,G),xe(Se,ae,G))}catch(we){Se(ae,we,G)}}):(G.value=K,G.state=1,ue(G,!1))}catch(ae){Se({done:!1},ae,G)}}};if(J&&(V=function(K){A(this,Z),m(K),v(Te,this);var te=_(this);try{K(xe(Le,te),xe(Se,te))}catch(k){Se(te,k)}},(Te=function(K){re(this,{type:j,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:0,value:void 0})}).prototype=p(Z=V.prototype,"then",function(K,te){var k=_(this),ae=ie(x(this,V));return k.parent=!0,ae.ok=!O(K)||K,ae.fail=O(te)&&te,ae.domain=a?oe.domain:void 0,0==k.state?k.reactions.add(ae):N(function(){Ie(ae,k)}),ae.promise}),Fe=function(){var G=new Te,K=_(G);this.promise=G,this.resolve=xe(Le,K),this.reject=xe(Se,K)},Y.f=ie=function(G){return G===V||void 0===G?new Fe(G):H(G)},!o&&O(L)&&X!==Object.prototype)){Me=X.then,q||p(X,"then",function(K,te){var k=this;return new V(function(ae,we){v(Me,k,ae,we)}).then(K,te)},{unsafe:!0});try{delete X.constructor}catch{}h&&h(X,Z)}s({global:!0,constructor:!0,wrap:!0,forced:J},{Promise:V}),y(V,j,!1,!0),S(j)},8674:(l,P,t)=>{t(3401),t(821),t(4164),t(6027),t(683),t(6294)},6027:(l,P,t)=>{var s=t(2109),o=t(6916),a=t(9662),u=t(8523),v=t(2534),p=t(408);s({target:"Promise",stat:!0,forced:t(612)},{race:function(S){var m=this,O=u.f(m),R=O.reject,A=v(function(){var x=a(m.resolve);p(S,function(b){o(x,m,b).then(O.resolve,R)})});return A.error&&R(A.value),O.promise}})},683:(l,P,t)=>{var s=t(2109),o=t(6916),a=t(8523);s({target:"Promise",stat:!0,forced:t(3702).CONSTRUCTOR},{reject:function(p){var h=a.f(this);return o(h.reject,void 0,p),h.promise}})},6294:(l,P,t)=>{var s=t(2109),o=t(5005),a=t(1913),u=t(2492),v=t(3702).CONSTRUCTOR,p=t(9478),h=o("Promise"),y=a&&!v;s({target:"Promise",stat:!0,forced:a||v},{resolve:function(m){return p(y&&this===h?u:this,m)}})},4916:(l,P,t)=>{var s=t(2109),o=t(2261);s({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},7852:(l,P,t)=>{var b,s=t(2109),o=t(1470),a=t(1236).f,u=t(7466),v=t(1340),p=t(3929),h=t(4488),y=t(4964),S=t(1913),m=o("".endsWith),O=o("".slice),R=Math.min,A=y("endsWith");s({target:"String",proto:!0,forced:!(!S&&!A&&(b=a(String.prototype,"endsWith"),b&&!b.writable)||A)},{endsWith:function(N){var F=v(h(this));p(N);var w=arguments.length>1?arguments[1]:void 0,I=F.length,M=void 0===w?I:R(u(w),I),L=v(N);return m?m(F,L,M):O(F,M-L.length,M)===L}})},2023:(l,P,t)=>{var s=t(2109),o=t(1702),a=t(3929),u=t(4488),v=t(1340),p=t(4964),h=o("".indexOf);s({target:"String",proto:!0,forced:!p("includes")},{includes:function(S){return!!~h(v(u(this)),v(a(S)),arguments.length>1?arguments[1]:void 0)}})},5306:(l,P,t)=>{var s=t(2104),o=t(6916),a=t(1702),u=t(7007),v=t(7293),p=t(9670),h=t(614),y=t(8554),S=t(9303),m=t(7466),O=t(1340),R=t(4488),A=t(1530),x=t(8173),b=t(647),N=t(7651),w=t(5112)("replace"),I=Math.max,M=Math.min,L=a([].concat),$=a([].push),Y=a("".indexOf),j=a("".slice),J=function(re){return void 0===re?re:String(re)},Q="$0"==="a".replace(/./,"$0"),q=!!/./[w]&&""===/./[w]("a","$0");u("replace",function(re,X,V){var Z=q?"$":"$0";return[function(z,oe){var ie=R(this),H=y(z)?void 0:x(z,w);return H?o(H,z,ie,oe):o(X,O(ie),z,oe)},function(se,z){var oe=p(this),ie=O(se);if("string"==typeof z&&-1===Y(z,Z)&&-1===Y(z,"$<")){var H=V(X,oe,ie,z);if(H.done)return H.value}var de=h(z);de||(z=O(z));var Ee=oe.global;if(Ee){var me=oe.unicode;oe.lastIndex=0}for(var ce=[];;){var ye=N(oe,ie);if(null===ye||($(ce,ye),!Ee))break;""===O(ye[0])&&(oe.lastIndex=A(ie,m(oe.lastIndex),me))}for(var De="",be=0,Te=0;Te<ce.length;Te++){for(var Fe=O((ye=ce[Te])[0]),Ne=I(M(S(ye.index),ie.length),0),Me=[],E=1;E<ye.length;E++)$(Me,J(ye[E]));var Ie=ye.groups;if(de){var ue=L([Fe],Me,Ne,ie);void 0!==Ie&&$(ue,Ie);var Ge=O(s(z,void 0,ue))}else Ge=b(Fe,ie,Ne,Me,Ie,z);Ne>=be&&(De+=j(ie,be,Ne)+Ge,be=Ne+Fe.length)}return De+j(ie,be)}]},!!v(function(){var re=/./;return re.exec=function(){var X=[];return X.groups={a:"7"},X},"7"!=="".replace(re,"$<a>")})||!Q||q)},3157:(l,P,t)=>{var b,s=t(2109),o=t(1470),a=t(1236).f,u=t(7466),v=t(1340),p=t(3929),h=t(4488),y=t(4964),S=t(1913),m=o("".startsWith),O=o("".slice),R=Math.min,A=y("startsWith");s({target:"String",proto:!0,forced:!(!S&&!A&&(b=a(String.prototype,"startsWith"),b&&!b.writable)||A)},{startsWith:function(N){var F=v(h(this));p(N);var w=u(R(arguments.length>1?arguments[1]:void 0,F.length)),I=v(N);return m?m(F,I,w):O(F,w,w+I.length)===I}})},5172:(l,P,t)=>{var s=t(2109),o=t(9781),a=t(7854),u=t(1702),v=t(2597),p=t(614),h=t(7976),y=t(1340),S=t(3070).f,m=t(9920),O=a.Symbol,R=O&&O.prototype;if(o&&p(O)&&(!("description"in R)||void 0!==O().description)){var A={},x=function(){var $=arguments.length<1||void 0===arguments[0]?void 0:y(arguments[0]),Y=h(R,this)?new O($):void 0===$?O():O($);return""===$&&(A[Y]=!0),Y};m(x,O),x.prototype=R,R.constructor=x;var b="Symbol(test)"==String(O("test")),N=u(R.valueOf),F=u(R.toString),w=/^Symbol\((.*)\)[^)]+$/,I=u("".replace),M=u("".slice);S(R,"description",{configurable:!0,get:function(){var $=N(this);if(v(A,$))return"";var Y=F($),j=b?M(Y,7,-1):I(Y,w,"$1");return""===j?void 0:j}}),s({global:!0,constructor:!0,forced:!0},{Symbol:x})}},3948:(l,P,t)=>{var s=t(7854),o=t(8324),a=t(8509),u=t(6992),v=t(8880),p=t(5112),h=p("iterator"),y=p("toStringTag"),S=u.values,m=function(R,A){if(R){if(R[h]!==S)try{v(R,h,S)}catch{R[h]=S}if(R[y]||v(R,y,A),o[A])for(var x in u)if(R[x]!==u[x])try{v(R,x,u[x])}catch{R[x]=u[x]}}};for(var O in o)m(s[O]&&s[O].prototype,O);m(a,"DOMTokenList")},2503:(l,P,t)=>{t.r(P),t.d(P,{AbstractActionHandler:()=>ut,AbstractDontCodeStoreProvider:()=>ot,AbstractSchemaItem:()=>ce,Action:()=>Ve,ActionContextType:()=>G,ActionType:()=>K,Change:()=>he,ChangeType:()=>W,DataTransformationInfo:()=>Ze,DontCodeChangeManager:()=>_e,DontCodeCore:()=>et,DontCodeGroupOperationType:()=>Se,DontCodeModel:()=>E,DontCodeModelManager:()=>Oe,DontCodeModelPointer:()=>ue,DontCodePluginManager:()=>Ke,DontCodePreviewManager:()=>ze,DontCodeProject:()=>dt,DontCodeReportGroupShowType:()=>xe,DontCodeSchema:()=>Ie,DontCodeSchemaEnum:()=>be,DontCodeSchemaEnumValue:()=>Te,DontCodeSchemaManager:()=>Ge,DontCodeSchemaObject:()=>Ce,DontCodeSchemaProperty:()=>Me,DontCodeSchemaRef:()=>Ne,DontCodeSchemaRoot:()=>De,DontCodeSchemaValue:()=>Fe,DontCodeSortDirectionType:()=>Le,DontCodeStoreAggregate:()=>Ue,DontCodeStoreCriteria:()=>ae,DontCodeStoreCriteriaOperator:()=>k,DontCodeStoreGroupby:()=>$e,DontCodeStoreGroupedByEntities:()=>nt,DontCodeStoreGroupedByValues:()=>st,DontCodeStoreManager:()=>te,DontCodeStorePreparedEntities:()=>rt,DontCodeStoreSort:()=>we,DontCodeTestManager:()=>Be,Message:()=>at,MessageType:()=>Qe,ModelQuerySingleResult:()=>it,MoneyAmount:()=>lt,SpecialFields:()=>tt,StoreProviderHelper:()=>Ae,TestProviderInterface:()=>vt,concatIterable:()=>ye,dtcde:()=>Je}),t(6992),t(3948),t(5172),t(4916),t(5306),t(3157),t(7852);var y=t(2256);function R(f){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(f)}function A(f,e){if(!(f instanceof e))throw new TypeError("Cannot call a class as a function")}function x(f,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,n.key,n)}}function b(f,e,r){return e&&x(f.prototype,e),r&&x(f,r),Object.defineProperty(f,"prototype",{writable:!1}),f}function F(f){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(f)}function w(f,e){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n})(f,e)}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(f,e,r){return(M=I()?Reflect.construct.bind():function(i,c,d){var g=[null];g.push.apply(g,c);var C=new(Function.bind.apply(i,g));return d&&w(C,d.prototype),C}).apply(null,arguments)}function $(f){var e="function"==typeof Map?new Map:void 0;return $=function(n){if(null===n||!function L(f){return-1!==Function.toString.call(f).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return M(n,arguments,F(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),w(i,n)},$(f)}function j(f,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Y(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(f)}function re(f,e){if(f){if("string"==typeof f)return X(f,e);var r=Object.prototype.toString.call(f).slice(8,-1);if("Object"===r&&f.constructor&&(r=f.constructor.name),"Map"===r||"Set"===r)return Array.from(f);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(f,e)}}function X(f,e){(null==e||e>f.length)&&(e=f.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=f[r];return n}t(6699),t(2023),t(2707);var se=Object.prototype.hasOwnProperty;function z(f,e){return(f=f.slice()).push(e),f}function oe(f,e){return(e=e.slice()).unshift(f),e}var ie=function(f){!function N(f,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(e&&e.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),e&&w(f,e)}(r,f);var e=function J(f){var e=I();return function(){var i,n=F(f);if(e){var c=F(this).constructor;i=Reflect.construct(n,arguments,c)}else i=n.apply(this,arguments);return j(this,i)}}(r);function r(n){var i;return A(this,r),(i=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,i.value=n,i.name="NewError",i}return b(r)}($(Error));function H(f,e,r,n,i){if(!(this instanceof H))try{return new H(f,e,r,n,i)}catch(T){if(!T.avoidNew)throw T;return T.value}"string"==typeof f&&(i=n,n=r,r=e,e=f,f=null);var c=f&&"object"===R(f);if(this.json=(f=f||{}).json||r,this.path=f.path||e,this.resultType=f.resultType||"value",this.flatten=f.flatten||!1,this.wrap=!se.call(f,"wrap")||f.wrap,this.sandbox=f.sandbox||{},this.preventEval=f.preventEval||!1,this.parent=f.parent||null,this.parentProperty=f.parentProperty||null,this.callback=f.callback||n||null,this.otherTypeCallback=f.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==f.autostart){var d={path:c?f.path:e};c?"json"in f&&(d.json=f.json):d.json=r;var g=this.evaluate(d);if(!g||"object"!==R(g))throw new ie(g);return g}}H.prototype.evaluate=function(f,e,r,n){var i=this,c=this.parent,d=this.parentProperty,g=this.flatten,T=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,e=e||this.json,(f=f||this.path)&&"object"===R(f)&&!Array.isArray(f)){if(!f.path&&""!==f.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!se.call(f,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');e=f.json,g=se.call(f,"flatten")?f.flatten:g,this.currResultType=se.call(f,"resultType")?f.resultType:this.currResultType,this.currSandbox=se.call(f,"sandbox")?f.sandbox:this.currSandbox,T=se.call(f,"wrap")?f.wrap:T,this.currPreventEval=se.call(f,"preventEval")?f.preventEval:this.currPreventEval,r=se.call(f,"callback")?f.callback:r,this.currOtherTypeCallback=se.call(f,"otherTypeCallback")?f.otherTypeCallback:this.currOtherTypeCallback,c=se.call(f,"parent")?f.parent:c,d=se.call(f,"parentProperty")?f.parentProperty:d,f=f.path}if(c=c||null,d=d||null,Array.isArray(f)&&(f=H.toPathString(f)),(f||""===f)&&e){var D=H.toPathArray(f);"$"===D[0]&&D.length>1&&D.shift(),this._hasParentSelector=null;var U=this._trace(D,e,["$"],c,d,r).filter(function(ee){return ee&&!ee.isParentSelector});return U.length?T||1!==U.length||U[0].hasArrExpr?U.reduce(function(ee,fe){var ge=i._getPreferredOutput(fe);return g&&Array.isArray(ge)?ee=ee.concat(ge):ee.push(ge),ee},[]):this._getPreferredOutput(U[0]):T?[]:void 0}},H.prototype._getPreferredOutput=function(f){var e=this.currResultType;switch(e){case"all":var r=Array.isArray(f.path)?f.path:H.toPathArray(f.path);return f.pointer=H.toPointer(r),f.path="string"==typeof f.path?f.path:H.toPathString(f.path),f;case"value":case"parent":case"parentProperty":return f[e];case"path":return H.toPathString(f[e]);case"pointer":return H.toPointer(f.path);default:throw new TypeError("Unknown result type")}},H.prototype._handleCallback=function(f,e,r){if(e){var n=this._getPreferredOutput(f);f.path="string"==typeof f.path?f.path:H.toPathString(f.path),e(n,r,f)}},H.prototype._trace=function(f,e,r,n,i,c,d,g){var C,T=this;if(!f.length)return this._handleCallback(C={path:r,value:e,parent:n,parentProperty:i,hasArrExpr:d},c,"value"),C;var D=f[0],U=f.slice(1),ee=[];function fe(pe){Array.isArray(pe)?pe.forEach(function(pt){ee.push(pt)}):ee.push(pe)}if(("string"!=typeof D||g)&&e&&se.call(e,D))fe(this._trace(U,e[D],z(r,D),e,D,c,d));else if("*"===D)this._walk(e,function(pe){fe(T._trace(U,e[pe],z(r,pe),e,pe,c,!0,!0))});else if(".."===D)fe(this._trace(U,e,r,n,i,c,d)),this._walk(e,function(pe){"object"===R(e[pe])&&fe(T._trace(f.slice(),e[pe],z(r,pe),e,pe,c,!0))});else{if("^"===D)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:U,isParentSelector:!0};if("~"===D)return C={path:z(r,D),value:i,parent:n,parentProperty:null},this._handleCallback(C,c,"property"),C;if("$"===D)fe(this._trace(U,e,r,null,null,c,d));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(D))fe(this._slice(D,U,e,r,n,i,c));else if(0===D.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var ge=D.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(pe){T._eval(ge,e[pe],pe,r,n,i)&&fe(T._trace(U,e[pe],z(r,pe),e,pe,c,!0))})}else if("("===D[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");fe(this._trace(oe(this._eval(D,e,r[r.length-1],r.slice(0,-1),n,i),U),e,r,n,i,c,d))}else if("@"===D[0]){var ve=!1,B=D.slice(1,-2);switch(B){case"scalar":(!e||!["object","function"].includes(R(e)))&&(ve=!0);break;case"boolean":case"string":case"undefined":case"function":R(e)===B&&(ve=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(ve=!0);break;case"number":Number.isFinite(e)&&(ve=!0);break;case"nonFinite":"number"==typeof e&&!Number.isFinite(e)&&(ve=!0);break;case"object":e&&R(e)===B&&(ve=!0);break;case"array":Array.isArray(e)&&(ve=!0);break;case"other":ve=this.currOtherTypeCallback(e,r,n,i);break;case"null":null===e&&(ve=!0);break;default:throw new TypeError("Unknown value type "+B)}if(ve)return this._handleCallback(C={path:r,value:e,parent:n,parentProperty:i},c,"value"),C}else if("`"===D[0]&&e&&se.call(e,D.slice(1))){var ne=D.slice(1);fe(this._trace(U,e[ne],z(r,ne),e,ne,c,d,!0))}else if(D.includes(",")){var Re,Pe=function Z(f,e){var r=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!r){if(Array.isArray(f)||(r=re(f))||e&&f&&"number"==typeof f.length){r&&(f=r);var n=0,i=function(){};return{s:i,n:function(){return n>=f.length?{done:!0}:{done:!1,value:f[n++]}},e:function(T){throw T},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g,c=!0,d=!1;return{s:function(){r=r.call(f)},n:function(){var T=r.next();return c=T.done,T},e:function(T){d=!0,g=T},f:function(){try{!c&&null!=r.return&&r.return()}finally{if(d)throw g}}}}(D.split(","));try{for(Pe.s();!(Re=Pe.n()).done;)fe(this._trace(oe(Re.value,U),e,r,n,i,c,!0))}catch(pe){Pe.e(pe)}finally{Pe.f()}}else!g&&e&&se.call(e,D)&&fe(this._trace(U,e[D],z(r,D),e,D,c,d,!0))}if(this._hasParentSelector)for(var je=0;je<ee.length;je++){var Xe=ee[je];if(Xe&&Xe.isParentSelector){var He=this._trace(Xe.expr,e,Xe.path,n,i,c,d);if(Array.isArray(He)){ee[je]=He[0];for(var ht=He.length,qe=1;qe<ht;qe++)je++,ee.splice(je,0,He[qe])}else ee[je]=He}}return ee},H.prototype._walk=function(f,e){if(Array.isArray(f))for(var r=f.length,n=0;n<r;n++)e(n);else f&&"object"===R(f)&&Object.keys(f).forEach(function(i){e(i)})},H.prototype._slice=function(f,e,r,n,i,c,d){if(Array.isArray(r)){var g=r.length,T=f.split(":"),C=T[2]&&Number.parseInt(T[2])||1,D=T[0]&&Number.parseInt(T[0])||0,U=T[1]&&Number.parseInt(T[1])||g;D=D<0?Math.max(0,D+g):Math.min(g,D),U=U<0?Math.max(0,U+g):Math.min(g,U);for(var ee=[],fe=D;fe<U;fe+=C)this._trace(oe(fe,e),r,n,i,c,d,!0).forEach(function(ve){ee.push(ve)});return ee}},H.prototype._eval=function(f,e,r,n,i,c){this.currSandbox._$_parentProperty=c,this.currSandbox._$_parent=i,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var d=f.includes("@path");d&&(this.currSandbox._$_path=H.toPathString(n.concat([r])));var g="script:"+f;if(!H.cache[g]){var T=f.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");d&&(T=T.replace(/@path/g,"_$_path")),H.cache[g]=new this.vm.Script(T)}try{return H.cache[g].runInNewContext(this.currSandbox)}catch(C){throw new Error("jsonPath: "+C.message+": "+f)}},H.cache={},H.toPathString=function(f){for(var e=f,r=e.length,n="$",i=1;i<r;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(n+=/^[\*0-9]+$/.test(e[i])?"["+e[i]+"]":"['"+e[i]+"']");return n},H.toPointer=function(f){for(var e=f,r=e.length,n="",i=1;i<r;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(n+="/"+e[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return n},H.toPathArray=function(f){var e=H.cache;if(e[f])return e[f].concat();var r=[],i=f.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(c,d){return"[#"+(r.push(d)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(c,d){return"['"+d.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(c,d){return";"+d.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(c){var d=c.match(/#([0-9]+)/);return d&&d[1]?r[d[1]]:c});return e[f]=i,e[f].concat()},H.prototype.vm={Script:function(){function f(e){A(this,f),this.code=e}return b(f,[{key:"runInNewContext",value:function(r){var n=this.code,i=Object.keys(r),c=[];!function(e,r,n){for(var i=e.length,c=0;c<i;c++)n(e[c])&&r.push(e.splice(c--,1)[0])}(i,c,function(D){return"function"==typeof r[D]});var d=i.map(function(D,U){return r[D]}),g=c.reduce(function(D,U){var ee=r[U].toString();return/function/.test(ee)||(ee="function "+ee),"var "+U+"="+ee+";"+D},"");!/(["'])use strict\1/.test(n=g+n)&&!i.includes("arguments")&&(n="var arguments = undefined;"+n);var T=(n=n.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),C=T>-1?n.slice(0,T+1)+" return "+n.slice(T+1):" return "+n;return M(Function,i.concat([C])).apply(void 0,function Q(f){return function q(f){if(Array.isArray(f))return X(f)}(f)||function _(f){if(typeof Symbol<"u"&&null!=f[Symbol.iterator]||null!=f["@@iterator"])return Array.from(f)}(f)||re(f)||function V(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(d))}}]),f}()},t(8674);class ce{constructor(e,r){this.array=!1,this.readOnly=!1,this.hidden=!1,this.parent=e,this.relativeId=r}isArray(){return this.array}setArray(e){this.array=e}isEnum(){return!1}isObject(){return!1}isReference(){return!1}isValue(){return!1}isRoot(){return!1}isHidden(){return this.hidden}setHidden(e){this.hidden=e}isReadonly(){return this.readOnly}setReadonly(e){this.readOnly=e}static generateItem(e,r,n){let c,i=Array.isArray(e);if(i)return console.error("arrays are not supported",e),e;if(i=!1,e.type)switch(e.type){case"object":c=new Ce(e,r,n);break;case"array":c=this.generateItem(e.items,r,n),i=!0;break;default:c=new Fe(e,r,n)}else if(e.enum)c=new be(e,r,n);else{if(!e.$ref)return e;c=new Ne(e,r,n)}return!0===e.readOnly&&c.setReadonly(!0),!0===e.writeOnly&&c.setHidden(!0),c.setArray(i),c}static isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}static goto(e,r){let n=e;return r.split("/").forEach(i=>{"#"!==i&&""!=i&&(n=n?.getChild(i)),n||console.error("Cannot find "+i+" of "+r+" in the following item ",e)}),n}upsertWith(e){return!1}getParent(){return this.parent}getChild(e){}getChildren(){return(new Map).entries()}updateWith(e){}allProperties(){return[].values()}getProperties(e){}hasProperties(e){return!1}getRelativeId(){return this.relativeId}setRelativeId(e){this.relativeId=e}getTargetPath(){return this.targetPath}setTargetPath(e){this.targetPath=e}isPossibleDynamicProperty(e){const r=this.getChildren();for(const n of r){const i=n[1].allProperties();for(const c of i)if(c[1].getChild(e))return c[1]}}getAllPossibleDynamicProperties(){const e=this.getChildren(),r=new Map;for(const n of e){const i=n[1].allProperties();for(const c of i)for(const d of c[1].getChildren())r.has(d[0])&&console.warn("Dynamic Property "+d[0]+" is being defined by multiple children."),r.set(d[0],d[1])}return r.entries()}getChildrenAndPossibleProperties(){return ye(this.getChildren(),this.getAllPossibleDynamicProperties())}}function*ye(...f){for(let e of f){let r;for(e=e[Symbol.iterator]();r=e.next(),!r.done;)yield r.value}}class Ce extends ce{constructor(e,r,n){super(n,r),this.children=new Map,e&&this.readJson(e)}readJson(e){const r=e.properties;if(r)for(const n in r)this.children.set(n,ce.generateItem(r[n],n,this))}isEnum(){return!1}isObject(){return!0}isReference(){return!1}isValue(){return!1}isRoot(){return!1}upsertWith(e){const r=this.getChild(e.location.id);if(r)r.updateWith(e);else if(null!=e.location.id){const n=ce.generateItem(e.update,e.location.id,this);if(e.location.after){const i=new Map;this.children.forEach((c,d)=>{i.set(d,c),d===e.location.after&&null!=e.location.id&&i.set(e.location.id,n)}),this.children=i}else this.children.set(e.location.id,n);n.updateWith(e)}return!0}updateWith(e){super.updateWith(e)}getChild(e){if(e)return this.children.get(e)}getChildren(){return this.children.entries()}}class De extends Ce{constructor(e){super(e,void 0)}readJson(e){super.readJson(e);const r=e.$defs;r&&this.children.set("$defs",new Ce({properties:r},"$defs",this))}isEnum(){return!1}isObject(){return!0}isReference(){return!1}isValue(){return!1}isRoot(){return!0}}class be extends ce{constructor(e,r,n){super(n,r),this.values=new Array,this.properties=new Map,this.updateValues(e.enum,this.values),this.targetPath=e.format}isEnum(){return!0}isObject(){return!1}isReference(){return!1}isValue(){return!1}isRoot(){return!1}getValues(){return this.values}updateWith(e){super.updateWith(e),this.updateValues(e.update.enum,this.values,e)}updateValues(e,r,n){e.forEach(i=>{if("string"==typeof i){if(r.find(c=>c.getValue()===i)||r.push(new Te(i)),n?.props){const c=new Me(n,this.relativeId+"="+i,this);c.isEmpty()||this.properties.set(i,c)}}else for(const c in i)if(i.hasOwnProperty(c)){let d=r.find(g=>g.getValue()===i);d||(d=new Te(c),r.push(d)),d.getChildren()||d.setChildren([]),this.updateValues(i[c].enum,d.getChildren(),n)}})}allProperties(){return this.properties.entries()}getProperties(e){return this.properties.get(e)}hasProperties(e){return this.properties.has(e)}}class Te{constructor(e,r){this._children=new Array,this._value=e,this._label=r||e}getLabel(){return this._label?this._label:this._value}setLabel(e){this._label=e}getValue(){return this._value}setValue(e){this._value=e}getChildren(){return this._children}setChildren(e){this._children=e}}class Fe extends ce{constructor(e,r,n){super(n,r),this.type=e.type,this.targetPath=e.format}isValue(){return!0}getType(){return this.type}}class Ne extends ce{constructor(e,r,n){super(n,r),this.resolvedRef=new Map,this.ref=e.$ref}isReference(){return!0}getReference(){return this.ref}resolveReference(e){this.resolvedRef.set("",e)}getChildren(){return this.resolvedRef.entries()}}class Me extends Ce{constructor(e,r,n){super({type:"object",properties:e.props},r,n),this.replace=!!e.replace&&e.replace,this.posAfter=e.location.after}isEmpty(){return 0==this.children.size}isReplace(){return this.replace}getPosAfter(){return this.posAfter}}class E{}E.ROOT="creation",E.APP_NAME_NODE="name",E.APP_TYPE_NODE="type",E.APP_TYPE=E.ROOT+"/"+E.APP_TYPE_NODE,E.APP_NAME=E.ROOT+"/"+E.APP_NAME_NODE,E.APP_ENTITIES_NODE="entities",E.APP_ENTITIES=E.ROOT+"/"+E.APP_ENTITIES_NODE,E.APP_ENTITIES_FROM_NODE="from",E.APP_ENTITIES_FROM=E.APP_ENTITIES+"/"+E.APP_ENTITIES_FROM_NODE,E.APP_ENTITIES_NAME_NODE="name",E.APP_ENTITIES_NAME=E.APP_ENTITIES+"/"+E.APP_ENTITIES_NAME_NODE,E.APP_FIELDS_NODE="fields",E.APP_FIELDS=E.APP_ENTITIES+"/"+E.APP_FIELDS_NODE,E.APP_FIELDS_NAME_NODE="name",E.APP_FIELDS_NAME=E.APP_FIELDS+"/"+E.APP_FIELDS_NAME_NODE,E.APP_FIELDS_TYPE_NODE="type",E.APP_FIELDS_TYPE=E.APP_FIELDS+"/"+E.APP_FIELDS_TYPE_NODE,E.APP_SHARING_NODE="sharing",E.APP_SHARING=E.ROOT+"/"+E.APP_SHARING_NODE,E.APP_SHARING_WITH_NODE="with",E.APP_SHARING_WITH=E.APP_SHARING+"/"+E.APP_SHARING_WITH_NODE,E.APP_REPORTS_NODE="reports",E.APP_REPORTS=E.ROOT+"/"+E.APP_REPORTS_NODE,E.APP_REPORTS_TITLE_NODE="title",E.APP_REPORTS_TITLE=E.APP_REPORTS+"/"+E.APP_REPORTS_TITLE_NODE,E.APP_REPORTS_FOR_NODE="for",E.APP_REPORTS_FOR=E.APP_REPORTS+"/"+E.APP_REPORTS_FOR_NODE,E.APP_REPORTS_GROUP_NODE="groupedBy",E.APP_REPORTS_GROUP=E.APP_REPORTS+"/"+E.APP_REPORTS_GROUP_NODE,E.APP_REPORTS_SORT_NODE="sortedBy",E.APP_REPORTS_SORT=E.APP_REPORTS+"/"+E.APP_REPORTS_SORT_NODE,E.APP_REPORTS_DISPLAY_NODE="as",E.APP_REPORTS_DISPLAY=E.APP_REPORTS+"/"+E.APP_REPORTS_DISPLAY_NODE,E.APP_REPORTS_GROUP_LABEL_NODE="label",E.APP_REPORTS_GROUP_LABEL=E.APP_REPORTS_GROUP+"/"+E.APP_REPORTS_GROUP_LABEL_NODE,E.APP_REPORTS_GROUP_OF_NODE="of",E.APP_REPORTS_GROUP_OF=E.APP_REPORTS_GROUP+"/"+E.APP_REPORTS_GROUP_OF_NODE,E.APP_REPORTS_GROUP_SHOW_NODE="show",E.APP_REPORTS_GROUP_SHOW=E.APP_REPORTS_GROUP+"/"+E.APP_REPORTS_GROUP_SHOW_NODE,E.APP_REPORTS_GROUP_AGGREGATE_NODE="display",E.APP_REPORTS_GROUP_AGGREGATE=E.APP_REPORTS_GROUP+"/"+E.APP_REPORTS_GROUP_AGGREGATE_NODE,E.APP_REPORTS_GROUP_AGGREGATE_LABEL_NODE="label",E.APP_REPORTS_GROUP_AGGREGATE_LABEL=E.APP_REPORTS_GROUP_AGGREGATE+"/"+E.APP_REPORTS_GROUP_AGGREGATE_LABEL_NODE,E.APP_REPORTS_GROUP_AGGREGATE_OPERATION_NODE="operation",E.APP_REPORTS_GROUP_AGGREGATE_OPERATION=E.APP_REPORTS_GROUP_AGGREGATE+"/"+E.APP_REPORTS_GROUP_AGGREGATE_OPERATION_NODE,E.APP_REPORTS_GROUP_AGGREGATE_OF_NODE="of",E.APP_REPORTS_GROUP_AGGREGATE_OF=E.APP_REPORTS_GROUP_AGGREGATE+"/"+E.APP_REPORTS_GROUP_AGGREGATE_OF_NODE,E.APP_REPORTS_SORT_BY_NODE="by",E.APP_REPORTS_SORT_BY=E.APP_REPORTS_SORT+"/"+E.APP_REPORTS_SORT_BY_NODE,E.APP_REPORTS_SORT_DIRECTION_NODE="direction",E.APP_REPORTS_SORT_DIRECTION=E.APP_REPORTS_SORT+"/"+E.APP_REPORTS_SORT_DIRECTION_NODE,E.APP_REPORTS_DISPLAY_TITLE_NODE="title",E.APP_REPORTS_DISPLAY_TITLE=E.APP_REPORTS_DISPLAY+"/"+E.APP_REPORTS_DISPLAY_TITLE_NODE,E.APP_REPORTS_DISPLAY_TYPE_NODE="type",E.APP_REPORTS_DISPLAY_TYPE=E.APP_REPORTS_DISPLAY+"/"+E.APP_REPORTS_DISPLAY_TYPE_NODE,E.APP_REPORTS_DISPLAY_OF_NODE="of",E.APP_REPORTS_DISPLAY_OF=E.APP_REPORTS_DISPLAY+"/"+E.APP_REPORTS_DISPLAY_OF_NODE,E.APP_REPORTS_DISPLAY_BY_NODE="by",E.APP_REPORTS_DISPLAY_BY=E.APP_REPORTS_DISPLAY+"/"+E.APP_REPORTS_DISPLAY_BY_NODE,E.APP_SOURCES_NODE="sources",E.APP_SOURCES=E.ROOT+"/"+E.APP_SOURCES_NODE,E.APP_SOURCES_NAME_NODE="name",E.APP_SOURCES_NAME=E.ROOT+"/"+E.APP_SOURCES_NODE+"/"+E.APP_SOURCES_NAME_NODE,E.APP_SOURCES_TYPE_NODE="type",E.APP_SOURCES_TYPE=E.ROOT+"/"+E.APP_SOURCES_NODE+"/"+E.APP_SOURCES_TYPE_NODE,E.APP_SOURCES_URL_NODE="url",E.APP_SOURCES_URL=E.ROOT+"/"+E.APP_SOURCES_NODE+"/"+E.APP_SOURCES_URL_NODE,E.APP_SCREENS_NODE="screens",E.APP_SCREENS=E.ROOT+"/"+E.APP_SCREENS_NODE,E.APP_SCREENS_NAME_NODE="name",E.APP_SCREENS_NAME=E.APP_SCREENS+"/"+E.APP_SCREENS_NAME_NODE,E.APP_SCREENS_LAYOUT_NODE="layout",E.APP_SCREENS_LAYOUT=E.APP_SCREENS+"/"+E.APP_SCREENS_LAYOUT_NODE,E.APP_COMPONENTS_NODE="components",E.APP_COMPONENTS=E.APP_SCREENS+"/"+E.APP_COMPONENTS_NODE,E.APP_COMPONENTS_TYPE_NODE="type",E.APP_COMPONENTS_TYPE=E.APP_COMPONENTS+"/"+E.APP_COMPONENTS_TYPE_NODE,E.APP_COMPONENTS_ENTITY_NODE="entity",E.APP_COMPONENTS_ENTITY=E.APP_COMPONENTS+"/"+E.APP_COMPONENTS_ENTITY_NODE;class Ie{}Ie.ROOT="/properties/"+E.ROOT,Ie.defaultv1={$id:"https://dont-code.net/v1/dont-code-schema.json",$schema:"https://json-schema.org/draft/2020-12/schema",description:"JSON Schema v1 for dont-code",type:"object",required:["creation"],properties:{creation:{type:"object",properties:{type:{enum:["Application"]},name:{type:"string"},entities:{type:"array",items:{$ref:"#/$defs/entity"}},sharing:{$ref:"#/$defs/sharing"},reports:{type:"array",items:{$ref:"#/$defs/report"}},sources:{type:"array",items:{$ref:"#/$defs/source"}},screens:{type:"array",items:{$ref:"#/$defs/screen"}}},additionalProperties:!1}},$defs:{entity:{type:"object",properties:{from:{type:"string",format:"$.creation.sources.name"},name:{type:"string"},fields:{type:"array",items:{$ref:"#/$defs/field"}}},additionalProperties:!1},field:{type:"object",properties:{name:{type:"string"},type:{enum:["Text","Number","Boolean",{Time:{enum:["Date","Date & Time","Time"]}},{Money:{enum:["Dollar","Euro","Other currency"]},Web:{enum:["Website (url)","Image"]}},{Special:{enum:["Reference"]}}]}},additionalProperties:!1},sharing:{type:"object",properties:{with:{enum:["No-one"]}},additionalProperties:!1},source:{type:"object",properties:{name:{type:"string"},type:{enum:["Unknown"]}}},report:{type:"object",properties:{title:{type:"string"},for:{type:"string",format:"$.creation.entities.name"},groupedBy:{type:"array",items:{$ref:"#/$defs/report-group"}},sortedBy:{type:"array",items:{$ref:"#/$defs/report-sort"}},as:{type:"array",items:{$ref:"#/$defs/report-display"}}},additionalProperties:!1},"report-group":{type:"object",properties:{of:{type:"string",format:".fields.name"},label:{type:"string"},show:{enum:["OnlyLowest","OnlyHighest"]},display:{type:"array",items:{$ref:"#/$defs/report-group-aggregate"}}},additionalProperties:!1},"report-group-aggregate":{type:"object",properties:{operation:{enum:["Count","Sum","Average","Minimum","Maximum"]},of:{type:"string",format:".@parent.fields.name"},label:{type:"string"}},additionalProperties:!1},"report-sort":{type:"object",properties:{by:{type:"string",format:".fields.name"},direction:{enum:["None","Ascending","Descending"]}},additionalProperties:!1},"report-display":{type:"object",properties:{type:{enum:["Table","Bar","Line","Pie"]},of:{type:"string",format:".@parent.fields.name"},by:{type:"string",format:".@parent.fields.name"},title:{type:"string"}},additionalProperties:!1},screen:{type:"object",properties:{name:{type:"string"},layout:{enum:["Flow","Grid"]},components:{type:"array",items:{$ref:"#/$defs/component"}}},additionalProperties:!1},component:{type:"object",properties:{type:{enum:["List","Edit","View"]},entity:{type:"string",format:"$.creation.entities.name"}},additionalProperties:!1}}};class ue{constructor(e,r,n,i,c,d){this.position=e,this.positionInSchema=r,this.containerPosition=n,this.containerPositionInSchema=i,this.lastElement=c||"",this.isProperty=d,this.fillMissingElements()}fillMissingElements(e){var r,n,i;if(null==this.position||null==this.positionInSchema)throw new Error("Cannot fill Elements for an empty position");null==this.containerPosition&&(this.containerPosition=null!==(r=ue.parentPosition(this.position))&&void 0!==r?r:void 0),null==this.containerPositionInSchema&&(this.containerPositionInSchema=null!==(n=ue.parentPosition(this.positionInSchema))&&void 0!==n?n:void 0),(null==this.lastElement||0==this.lastElement.length)&&(this.lastElement=null!==(i=ue.lastElementOf(this.position))&&void 0!==i?i:this.position),null==this.isProperty&&e&&(this.isProperty=!this.containerPositionInSchema||null!=e.locateItem(this.containerPositionInSchema,!0).getChild(this.lastElement))}static lastElementOf(e){return null==e?e:e.substring(e.lastIndexOf("/")+1)}static nextItemAndPosition(e,r){let n=e.indexOf("/",r);n===r&&(n=e.indexOf("/",r+=1)),-1!==n?n-=1:n=n===r?-1:e.length-1;let i=null;return-1!==n&&(i=e.substring(r,n+1)),{pos:n,value:i}}calculateKeyOrContainer(){var e;return!0===this.isProperty?this.lastElement:null!==(e=ue.lastElementOf(this.containerPosition))&&void 0!==e?e:""}calculateItemIdOrContainer(){var e;return!1===this.isProperty?this.lastElement:null!==(e=ue.lastElementOf(this.containerPosition))&&void 0!==e?e:""}isSubItemOf(e){return e.position===this.containerPosition?this.lastElement:null}isUnderSubItemOf(e){if(this.positionInSchema.startsWith(e.positionInSchema)){const r=this.positionInSchema.indexOf("/",e.positionInSchema.length+1);return-1==r?this.positionInSchema.substring(e.positionInSchema.length+1):this.positionInSchema.substring(e.positionInSchema.length+1,r)}return null}subItemOrPropertyPointer(e,r){return r?this.subPropertyPointer(e):this.subItemPointer(e)}subPropertyPointer(e){return new ue(""===this.position?e:this.position+"/"+e,""===this.positionInSchema?e:this.positionInSchema+"/"+e,this.position,this.positionInSchema,e,!0)}subItemPointer(e){return new ue(""===this.position?e:this.position+"/"+e,this.positionInSchema,this.position,this.containerPositionInSchema,e,!1)}safeParentPointer(e){const r=this.parentPointer(e);if(void 0===r)throw new Error("No parent position for pointer "+this.position);return r}parentPointer(e){if(null==this.containerPosition||null==this.containerPositionInSchema)return;const r=new ue(this.containerPosition,this.containerPositionInSchema);return null!=e&&r.fillMissingElements(e),r}isParentOf(e,r){if(!0===r){const n=ue.parentPosition(e);return null!=n&&this.position==n}return e.startsWith(this.position)}static parentPosition(e){if(null==e||0===e.length)return null;const r=e.lastIndexOf("/");return-1==r?"":e.substring(0,r)}static splitPosition(e){if(null==e||0===e.length)return null;const r=e.lastIndexOf("/");return-1==r?{parent:"",element:e}:{parent:e.substring(0,r),element:e.substring(r+1)}}}class Ge{constructor(){this.reset()}getSchema(){return this.currentSchema}convertSchemaToMap(e){return new De(e)}registerChanges(e){if(e["schema-updates"]){const r=e["schema-updates"];for(const n of r){const i=n.changes;for(const c of i)if(c.location.id){const d=this.locateItem(c.location.parent);if(!d)throw"Cannot find parent element: "+c.location.parent;d.upsertWith(c)}}}}locateItem(e,r){const n=e.split("/");let i=this.currentSchema;for(const c of n){if(!i)throw console.error("Could not find subItem "+c+" of "+e),new Error("Could not find subItem "+c+" of "+e);if(c&&c.length>0&&"#"!==c){if(i.isReference()&&(i=this.resolveReference(i)),!i)throw console.error("Could not find reference "+i?.getReference()+" of "+e),new Error("Could not find reference "+i?.getReference()+" of "+e);i=i.getChild(c)}}if(r&&i?.isReference()&&(i=this.resolveReference(i)),null!=i)return i;throw new Error("Could not find item at schema position "+e)}resolveReference(e){return this.locateItem(e.getReference())}generateParentPointer(e){if(null!=e.containerPosition)return this.generateSchemaPointer(e.containerPosition)}generateSchemaPointer(e){var r;let n;const i=e,c=i.split("/");if(0===c.length||0===c[0].length)return n=new ue(e,e),n;n=new ue(e,"");let d=this.currentSchema,g=!1;for(const T of c)if(g)n.isProperty=!1,g=!1;else{let C=null!==(r=d.getChild(T))&&void 0!==r?r:d.isPossibleDynamicProperty(T);if(!C)throw new Error("Cannot parse '"+i+"' from the schema as "+T+" is not a child of "+d.getRelativeId());if(n.isProperty=!0,n.containerPositionInSchema=n.positionInSchema,n.positionInSchema=null!==n.positionInSchema&&n.positionInSchema.length>0?n.positionInSchema+"/"+T:T,g=!!C.isArray(),C.isReference()&&(C=this.resolveReference(C)),null==C)throw new Error("Cannot parse '"+i+"' from the schema as "+C+" is reference an unknown element");d=C}return n.containerPositionInSchema=n.positionInSchema.substring(0,n.positionInSchema.lastIndexOf("/")),n.containerPosition=n.position.substring(0,n.position.lastIndexOf("/")),n.lastElement=c[c.length-1],n}generateSubSchemaPointer(e,r){return this.locateItem(e.positionInSchema,!0).getChild(r)?e.subPropertyPointer(r):e.subItemPointer(r)}reset(){this.readSchema=Ie.defaultv1,this.currentSchema=this.convertSchemaToMap(this.readSchema)}}class Ke{constructor(){this.plugins=new Map}registerPlugin(e,r,n){const i=e.getConfiguration(),c=i.plugin.id+"-v"+i.plugin.version;null==this.plugins.get(c)&&(r.registerChanges(i),n.registerHandlers(i),this.plugins.set(c,new We(e)))}initPlugins(e){this.plugins.forEach(r=>{var n;if(!1===r.initCalled)try{const i=null===(n=r.plugin.getConfiguration())||void 0===n?void 0:n["definition-updates"];e.getChangeManager().applyPluginConfigUpdates(i),r.plugin.pluginInit(e),r.initCalled=!0}catch(i){console.error("Error calling "+r.plugin+" init method:",i)}})}reset(){this.plugins.clear()}}class We{constructor(e,r){this.plugin=e,this.initCalled=null!=r&&r}}class ze{constructor(){this.reset()}reset(){this.handlersPerLocations=new Map,this.globalHandlersPerLocations=new Map,this.actionHandlersPerLocation=new Map,this.globalHandlers=new y.ReplaySubject}registerHandlers(e){if(e["preview-handlers"]&&e["preview-handlers"].forEach(r=>{let n=this.handlersPerLocations.get(r.location.parent);n||(n=new Array,this.handlersPerLocations.set(r.location.parent,n)),n.push(r)}),e["global-handlers"]&&e["global-handlers"].forEach(r=>{let n=this.handlersPerLocations.get(r.location.parent);n||(n=new Array,this.handlersPerLocations.set(r.location.parent,n)),n.push(r),n=this.globalHandlersPerLocations.get(r.location.parent),n||(n=new Array,this.globalHandlersPerLocations.set(r.location.parent,n)),n.push(r),this.globalHandlers.next(r)}),e["action-handlers"])for(const r of e["action-handlers"]){let n=this.actionHandlersPerLocation.get({position:r.location.parent,context:r["action-context"]});n||(n=new Array,this.actionHandlersPerLocation.set({position:r.location.parent,context:r["action-context"]},n)),n.push(r)}}getGlobalHandlers(){return this.globalHandlersPerLocations}receiveGlobalHandlers(){return this.globalHandlers}retrieveHandlerConfig(e,r){const n=this.handlersPerLocations.get(e);let i=null,c=!1;if(n)for(const d of n)if(d.location.values)if(r){let g=r;d.location.id&&(g=r[d.location.id]),this.extractValuesAsArray(d.location.values).forEach(T=>{T!==g||(i=d)})}else c=!0;else null===i&&(i=d);else if("string"==typeof r&&e.lastIndexOf("/")>0){e.endsWith("/")&&(e=e.substring(0,e.length-1));const g={};return g[e.substring(e.lastIndexOf("/")+1)]=r,this.retrieveHandlerConfig(e.substring(0,e.lastIndexOf("/")),g)}if(null===i&&c)throw new Error("Content must be provided in order to select an handler for position "+e);return i}retrieveActionHandlers(e,r,n){return this.actionHandlersPerLocation.get({position:e,context:r})??[]}extractValuesAsArray(e){const r=new Array;return this.extractValuesToArray(e,r),r}extractValuesToArray(e,r){if(Array.isArray(e))e.forEach(n=>{"string"==typeof n?r.push(n):this.extractValuesToArray(n,r)});else for(const n in e)e.hasOwnProperty(n)&&this.extractValuesToArray(e[n],r)}}var xe=(()=>{return(f=xe||(xe={})).OnlyLowest="OnlyLowest",f.OnlyHighest="OnlyHighest",xe;var f})(),Se=(()=>{return(f=Se||(Se={})).Count="Count",f.Sum="Sum",f.Average="Average",f.Minimum="Minimum",f.Maximum="Maximum",Se;var f})(),Le=(()=>{return(f=Le||(Le={})).None="None",f.Ascending="Ascending",f.Descending="Descending",Le;var f})(),G=(()=>{return(f=G||(G={})).LIST="list",f.EDIT="edit",f.VIEW="view",G;var f})(),K=(()=>{return(f=K||(K={})).EXTRACT="extract",f.UPDATE="update",f.CALCULATE="calculate",K;var f})();class te{constructor(e,r){this.modelMgr=e,this.providerByPosition=new Map,this.providerByType=new Map,this._default=r,this.reset()}reset(){this.providerByPosition.clear(),this.providerByType.clear()}getProvider(e){var r;if(null==e)return this._default;{let n=null;const i=null===(r=this.modelMgr.findTargetOfProperty(E.APP_ENTITIES_FROM_NODE,e))||void 0===r?void 0:r.value;return i&&(n=this.providerByType.get(i.type)),n||(n=this.providerByPosition.get(e)),n??this._default}}getProviderSafe(e){const r=this.getProvider(e);if(null==r)throw new Error("Trying to get an undefined or null provider");return r}getDefaultProvider(){return this.getProvider()}getDefaultProviderSafe(){return this.getProviderSafe()}setProvider(e,r){null==r?this._default=e:this.providerByPosition.set(r,e)}setProviderForSourceType(e,r){this.providerByType.set(r,e)}setDefaultProvider(e){this.setProvider(e)}removeProvider(e){null==e?this._default=void 0:this.providerByPosition.delete(e)}removeProviderForSourceType(e){this.providerByType.delete(e)}removeDefaultProvider(){this.removeProvider()}storeEntity(e,r){return this.getProviderSafe(e).storeEntity(e,r)}loadEntity(e,r){return this.getProviderSafe(e).loadEntity(e,r)}safeLoadEntity(e,r){return this.getProviderSafe(e).safeLoadEntity(e,r)}deleteEntity(e,r){return this.getProviderSafe(e).deleteEntity(e,r)}searchEntities(e,...r){return this.getProviderSafe(e).searchEntities(e,...r)}searchAndPrepareEntities(e,r,n,i,...c){return this.getProviderSafe(e).searchAndPrepareEntities(e,r,n,i,...c)}canStoreDocument(e){var r;return(null===(r=this.getProvider(e))||void 0===r?void 0:r.canStoreDocument(e))||!1}storeDocuments(e,r){return this.getProviderSafe(r).storeDocuments(e,r)}}var k=(()=>{return(f=k||(k={})).EQUALS="=",f.LESS_THAN="<",f.LESS_THAN_EQUAL="<=",k;var f})();class ae{constructor(e,r,n){this.name=e,this.value=r,this.operator=n||k.EQUALS}}class we{constructor(e,r,n){this.by=e,this.subSort=n,this.direction=null==r?Le.None:r}}class $e{constructor(e,r,n){this.of=e,this.show=n,this.display=null==r?{}:r}atLeastOneGroupIsRequested(){return null!=this.display&&Object.keys(this.display).length>0}getRequiredListOfFields(){const e=new Set;if(null!=this.display)for(const r of Object.values(this.display))e.add(r.of);return e}}class Ue{constructor(e,r){this.of=e,this.operation=r}}class he{constructor(e,r,n,i,c,d){if(this.type=e,this.position=r,"/"===r)throw new Error("Root position is defined by empty string and not slash anymore");this.value=n,this.pointer=i,this.beforeKey=c,this.oldPosition=d}getSafeParentPosition(){const e=this.getParentPosition();if(null==e)throw new Error("No Parent position for root changes.");return e}getParentPosition(){var e;return null!=this.pointer?null!==(e=this.pointer.containerPosition)&&void 0!==e?e:null:ue.parentPosition(this.position)}}var W=(()=>{return(f=W||(W={})).ADD="ADD",f.UPDATE="UPDATE",f.DELETE="DELETE",f.MOVE="MOVE",f.RESET="RESET",f.ACTION="ACTION",W;var f})();class Ve extends he{constructor(e,r,n,i,c,d,g){super(g??W.ACTION,e,r,c),this.running=new y.Subject,this.context=n,this.actionType=i,null!=d&&(this.running=d)}}class Oe{constructor(e){this.schemaMgr=e,this.reset()}reset(){this.content=void 0}getContent(){return this.content}resetContent(e){this.content=e}static isHidden(e){return 1==e?.$hidden}static isReadonly(e){return 1==e?.$readOnly}applyChange(e){var r,n;let i=null!==(r=e.pointer)&&void 0!==r?r:this.schemaMgr.generateSchemaPointer(e.position);e.pointer=i;const d=null===(n=e.pointer)||void 0===n?void 0:n.lastElement;null!=i.containerPosition&&null!=d&&(i=this.schemaMgr.generateParentPointer(i));const g=new ke;g.isRoot=!0,g.name=i.position;let T=g,C=this.findAtPosition(i.position);if(null==C){if(e.type===W.DELETE)return[];{C=this.findAtPosition(i.position,!0,g);let U=i.position;for(;T.subChanges.length>0;)U=U.substring(0,U.lastIndexOf("/")),T=T.subChanges[0];g.name=U}}e.type===W.ACTION&&(T.type=W.ACTION);const D=this.applyChangeRecursive(e,C,e.value,e.pointer,T);return this.generateChanges(e,g,D,this.schemaMgr.generateSchemaPointer(g.name))}applyChangeRecursive(e,r,n,i,c,d){if(null==e.pointer)throw new Error("Cannot apply a change without a pointer at position "+e.position);let g=!0;null==d&&(d=e.oldPosition);const T=i.lastElement;if(T||0===T.length){const C=0===T.length?r:r[T];switch(e.type){case W.ACTION:{const D=c.createSubChange(W.ACTION,T,c.value);this.compareRecursiveIfNeeded(e,C,null,i,D);break}case W.ADD:case W.UPDATE:case W.RESET:{let D;if(e.type===W.RESET&&e.position===i.position)"object"==typeof n&&this.isTheSameForParent(C,n)?D=c.createSubChange(void 0,T,null):("object"==typeof n||C!==n)&&(D=c.createSubChange(W.RESET,T,n));else if(null==C)D=c.createSubChange(W.ADD,T,n);else if("object"==typeof n&&this.isTheSameForParent(C,n))D=c.createSubChange(void 0,T,null);else if("object"==typeof n||C!==n){if("object"==typeof C&&e.type==W.ADD){g=!1;for(const U of Object.getOwnPropertyNames(n))if(null!=C[U]){g=!0;break}}D=c.createSubChange(W.UPDATE,T,n)}D&&this.compareRecursiveIfNeeded(e,C,n,i,D),T.length>0&&g&&this.insertProperty(r,T,n,e.beforeKey)}break;case W.DELETE:if(r[T]){const D=c.createSubChange(W.DELETE,T,null);this.compareRecursiveIfNeeded(e,r[T],n,i,D),delete r[T]}break;case W.MOVE:if(e.position===i.position){if(null==d)throw new Error("Cannot process MOVE change without oldPosition"+e.position);if(null==n&&(n=this.findAtPosition(d)),n){const D=c.createSubChange(W.MOVE,T,n,d);if(e.position!==d){this.compareRecursiveIfNeeded(e,null,n,i,D,d),this.insertProperty(r,T,n,e.beforeKey);const U=ue.splitPosition(d);delete this.findAtPosition(U.parent)[U.element]}else this.compareRecursiveIfNeeded(e,null,n,i,D,d),this.insertProperty(r,T,n,e.beforeKey)}}else{const D=c.createSubChange(W.MOVE,T,null,d);this.compareRecursiveIfNeeded(e,r,n,i,D,d)}break;default:throw new Error("No support for change of type "+e.type)}}else this.compareRecursiveIfNeeded(e,r,n,i,c,d);return g}isTheSameForParent(e,r){if(r===e)return!0;if(null==r||null==e)return!1;if("object"==typeof e&&"object"==typeof r){const n=Object.keys(e),i=Object.keys(r);return n.length===i.length&&n.every((c,d)=>c===i[d])}return e===r}compareRecursiveIfNeeded(e,r,n,i,c,d){(null==r||"object"!=typeof r)&&(r={}),(null==n||"object"!=typeof n)&&(n={});const g=new Set;for(const T in r){const C=this.schemaMgr.generateSubSchemaPointer(i,T),D=C.position;g.add(T),n.hasOwnProperty(T)?this.applyChangeRecursive(e,r,n[T],C,c,d):e.type==W.ACTION?this.applyChangeRecursive(new Ve(D,e.value,e.context,e.actionType,C,e.running),r,null,C,c):e.type!=W.ADD&&this.applyChangeRecursive(new he(W.DELETE,D,null,C),r,null,C,c,d)}for(const T in n)if(e.type===W.MOVE){const C=this.schemaMgr.generateSubSchemaPointer(i,T);this.applyChangeRecursive(e,r,n[T],C,c,d+"/"+T)}else if(!g.has(T)){const C=this.schemaMgr.generateSubSchemaPointer(i,T);this.applyChangeRecursive(new he(W.ADD,C.position,n[T],C),r,n[T],C,c)}}generateChanges(e,r,n,i,c){if(null==c&&(c=new Array),null==e.pointer)throw new Error("Cannot generate changes without the pointer");if(null==i&&(i=e.pointer),null!=r.type)if(r.type===W.MOVE){if(null==r.oldPosition)throw new Error("A Move Change must have an oldPosition set "+i.position);r.oldPosition!==i.position&&e.position===i.position&&c.push(new he(W.UPDATE,ue.parentPosition(r.oldPosition),r.value)),c.push(new he(W.MOVE,i.position,r.value,i,void 0,r.oldPosition))}else c.push(r.type===W.ACTION?new Ve(i.position,e.value,e.context,e.actionType,i,e.running):new he(r.type,i.position,r.value,i));else for(let d=0;d<r.subChanges.length;d++){const g=r.subChanges[d];if(null!=g.type&&g.type!==W.UPDATE&&g.name.length>0){1==n&&c.push(new he(W.UPDATE,i.position,this.findAtPosition(i.position),i));break}}for(let d=0;d<r.subChanges.length;d++){const g=r.subChanges[d];this.generateChanges(e,g,!0,this.schemaMgr.generateSubSchemaPointer(i,g.name),c)}return c}generateNextKeyForPosition(e,r=!1){const n=this.findAtPosition(e,r);if(null==n)throw new Error("No element at position "+e);return Oe.generateNextKey(n)}static generateNextKey(e){let r;r=null!=e.size?e:new Set(Object.keys(e));let n=r.size,i=!1;const c=Oe.POSSIBLE_CHARS_FOR_ARRAY_KEYS_LENGTH;let d;do{d="";do{const g=Math.trunc(n/c);d=Oe.POSSIBLE_CHARS_FOR_ARRAY_KEYS[n%c].concat(d),n=g-1}while(n>=0);i=r.has(d),n++}while(i);return d}findAtPosition(e,r,n){const i=e.split("/");if(null==this.content){if(!r)return null;this.content={}}let c=this.content,d="";return i.forEach(g=>{if(""===g||null===c)return c;if(d=0===d.length?g:d+"/"+g,!c[g]){if(!r)return c=null,null;c[g]={},n&&(n=n.createSubChange(W.ADD,g,{}))}c=c[g]}),c}queryModelToArray(e,r){let n=this.content;return r&&(n=this.findAtPosition(r,!1)),H({path:e,json:n,resultType:"value",wrap:!1,flatten:!0})}queryModelToSingle(e,r){var n;let i=this.content;r&&(i=this.findAtPosition(r,!1));let c=H({path:e,json:i,resultType:"all",wrap:!1});if(Array.isArray(c)){if(!(c.length<=1))throw new Error("Multiple results returned by queryModelToSingle with path "+e);c=c[0]}return!(null===(n=c?.pointer)||void 0===n)&&n.startsWith("/")&&(c.pointer=c.pointer.substring(1)),null!=c&&(delete c.path,delete c.parent,delete c.parentProperty),c}findAllPossibleTargetsOfProperty(e,r,n){if(null==n){const c=this.schemaMgr.generateSchemaPointer(r);n=this.schemaMgr.locateItem(c.subPropertyPointer(e).positionInSchema,!0)}const i=n?.getTargetPath();if(n&&i){const c=i.lastIndexOf(".");return this.queryModelToArray(i.substring(0,c)+".*")}throw new Error("No Schema or no format definition for "+r+"/"+e)}findTargetOfProperty(e,r,n){const i=this.findAtPosition(r,!1);if(i&&i[e]){if(null==n){const d=this.schemaMgr.generateSchemaPointer(r);n=this.schemaMgr.locateItem(d.subPropertyPointer(e).positionInSchema,!0)}const c=n?.getTargetPath();if(n&&c){const d=c.lastIndexOf("."),g=c.substring(0,d)+"[?(@['"+c.substring(d+1)+"']===\""+i[e]+'")]';return this.queryModelToSingle(g)}throw new Error("No Schema or no format definition for "+r+"/"+e)}return null}insertProperty(e,r,n,i){if(i){const c=Object.keys(e);for(const d of c)if(d!==r){const g=e[d];delete e[d],d===i&&(void 0!==e[r]&&delete e[r],e[r]=n),e[d]=g}}else void 0!==e[r]&&delete e[r],e[r]=n}convertToChange(e){let r=this.schemaMgr.generateSchemaPointer(e.location.parent);return this.schemaMgr.locateItem(r.positionInSchema,!1).isArray()?r=r.subItemPointer(null==e.location.id||"*"===e.location.id?this.generateNextKeyForPosition(r.position,!0):e.location.id):null!=e.location.id&&(r=r.subItemPointer(e.location.id)),new he(W.ADD,r.position,e.update,r,e.location.after)}guessNamePropertyOfElement(e,r){if(null==r){if(null==e)throw new Error("Either position or model must be provided");if(null==(r=this.findAtPosition(e,!1)))throw new Error("Position "+e+" does not exist in model")}null!=r.fields&&Array.isArray(r.fields)&&(r=r.fields);const n={score:-1,field:null};for(const i in r)if(Oe.scoreFieldAsName(r[i].name,r[i].type,n))break;return n.score>0?n.field:null}static guessNamePropertyOfObject(e){const r={score:-1,field:null};for(const n in e)Oe.scoreFieldAsName(n,"Text",r);return r.score>0?r.field:null}static guessNamePropertyFromList(...e){const r={score:-1,field:null};for(const n of e)Oe.scoreFieldAsName(n,"Text",r);return r.score>0?r.field:null}static scoreFieldAsName(e,r,n){if(null==e)return!1;const i=e.toLowerCase();for(const[c,d]of this.NAME_PROPERTY_NAMES)if(i===c){const g=d??0;if(n.score<g&&(n.score=g,n.field=e,100==n.score))return!0}else if(i.includes(c)){const g=(d??0)/2;n.score<g&&(n.score=g,n.field=e)}return"Text"==r&&n.score<20&&(n.score=20,n.field=e),n.score>0}extractValue(e,r,n,i){if(null==e||(r.parsed||this.extractMetaData(e,r,n,i),r.direct))return e;if(r.array){if(!(e.length>0))return e;e=e[0]}if(null!=r.subValue)return e[r.subValue];if(null!=r.subValues){for(let c=0;c<r.subValues.length&&null!=(e=e[r.subValues[c]]);c++);return e}}applyValue(e,r,n,i,c,d){if(null==e||(n.parsed||this.extractMetaData(e,n,c,d),n.direct))return r;if(n.array){if(!(e.length>0))return null!=r&&e.push(r),e;e=e[0]}if(null!=n.subValue)void 0===r?delete e[n.subValue]:e[n.subValue]=r;else if(null!=n.subValues){let g=e;if(void 0===r){for(let T=0;T<n.subValues.length-1&&(g=g[n.subValues[T]],null!=g);T++);null!=g&&null!=g[n.subValues[n.subValues.length-1]]&&delete g[n.subValues[n.subValues.length-1]]}else{for(let T=0;T<n.subValues.length-1;T++)null==g[n.subValues[T]]&&(g[n.subValues[T]]={}),g=g[n.subValues[T]];if(null==g[n.subValues[n.subValues.length-1]]&&null!=i){let T=i;for(let C=0;C<n.subValues.length-1;C++){if(null==T[n.subValues[C]]){T=null;break}T=T[n.subValues[C]]}if(null!=T)for(const C in T)null==g[C]&&null!=T[C]&&(g[C]=structuredClone(T[C]))}g[n.subValues[n.subValues.length-1]]=r}}return e}sortValues(e,r=1,n,i,c,d){const g=i??new Ze;if(!g.parsed)for(const T of e)if(this.extractMetaData(this.extractField(T,n),g,c,d),g.parsed)break;g.parsed?e.sort((T,C)=>{const D=this.extractValue(this.extractField(T,n),g,c,d),U=this.extractValue(this.extractField(C,n),g,c,d);return null==D?null==U?0:-r:null==U?r:"string"==typeof D&&"string"==typeof U?r*D.localeCompare(U):D<U?-r:D>U?r:0}):console.warn("Cannot sort array of unknown values")}extractMetaData(e,r,n,i){if(null!=e)if(r.parsed=!0,r.subValue=null,r.subValues=null,"object"!=typeof e)null!=e?r.direct=!0:r.parsed=!1;else if(Array.isArray(e)&&(r.array=!0,console.debug("Getting an array as a value for metadata extraction",e),e.length>0?e=e[0]:r.parsed=!1),e instanceof Date)r.direct=!0;else if(void 0!==e.value)r.subValue="value";else if(void 0!==e.amount)r.subValue="amount";else if(void 0!==e.cost)r.subValues=["cost","amount"];else{let c=null;for(const d in e)null==c&&(c=d),null!=e[d]&&"object"!=typeof e[d]&&(r.subValue=d);null==r.subValue&&null==r.subValues&&("object"!=typeof e||e instanceof Date?(r.subValue=c,console.warn("Guessed value key of "+r.subValue+" for object:",e)):(console.warn("Cannot guess value for object: ",e),r.parsed=!1,r.subValue=null,r.subValues=null,r.direct=!1,r.array=!1))}}modifyValues(e,r,n,i,c,d){if(null==e)throw new Error("Cannot modify value of null object");const C=i(this.extractValue(e,n,c,d),this.extractValue(r,n,c,d));return this.applyValue(e,C,n,r,c,d)}extractField(e,r){return null!=r&&null!=e?e[r]:e}}Oe.POSSIBLE_CHARS_FOR_ARRAY_KEYS="abcdefghijklmnopqrstuvxyz",Oe.POSSIBLE_CHARS_FOR_ARRAY_KEYS_LENGTH=Oe.POSSIBLE_CHARS_FOR_ARRAY_KEYS.length,Oe.NAME_PROPERTY_NAMES=new Map([["name",100],["nom",100],["title",80],["titre",80],["lastname",80],["label",70],["libell\xe9",70]]);class Ze{constructor(){this.parsed=!1,this.array=!1,this.direct=!1,this.subValue=null,this.subValues=null}}class ke{constructor(e,r,n,i){this.name="",this.subChanges=new Array,this.isRoot=!1,e&&(this.type=e),r&&(this.name=r),this.oldPosition=i,this.value=n}createSubChange(e,r,n,i){const c=new ke(e,r,n,i);return this.subChanges.push(c),c}}class it{}class _e{constructor(e,r){this.schemaManager=e,this.modelManager=r,this.listeners=new Map,this.listenerCachePerPosition=new Map,this.reset()}reset(){null!=this.receivedChanges&&this.receivedChanges.complete(),this.receivedChanges=new y.Subject,this.listeners.clear(),this.listenerCachePerPosition.clear()}isInterestedIn(e,r,n){let i=!1;if("?"===e[e.length-1]&&(i=!0,e=e.substring(0,e.length-1)),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),null!=n.position&&n.position.startsWith(e)){let c=ue.nextItemAndPosition(n.position,e.length+1);const d=c.value;return r?d===r||(c=ue.nextItemAndPosition(n.position,c.pos+1),c.value===r):!i||null!=d&&(c=ue.nextItemAndPosition(n.position,c.pos+1),""===c.value)}return!1}createNewListener(e,r){const n={position:e,property:r};this.clearEmptyListeners();let i=this.listeners.get(n);if(null==i&&(i=new y.ReplaySubject(1),this.listeners.set(n,i),this.listenerCachePerPosition.clear()),1==i.observed)return(0,y.throwError)(()=>new Error("Several components listen to the same position {"+e+", "+r));const c=this.cleanPosition(e),d=this.modelManager.findAtPosition(c,!1);if(null!=d){let g=new he(W.RESET,c,d,this.schemaManager.generateSchemaPointer(c));if(this.isInterestedIn(e,r,g))i.next(g);else if(null!=r)for(const T in d)g=new he(W.RESET,c+"/"+T,d[T],this.schemaManager.generateSchemaPointer(c+"/"+T)),this.isInterestedIn(e,r,g)?i.next(g):null!=r&&null!=d[T][r]&&(g=new he(W.RESET,c+"/"+T+"/"+r,d[T][r],this.schemaManager.generateSchemaPointer(c+"/"+T+"/"+r)),this.isInterestedIn(e,r,g)&&i.next(g))}return i}addToListenerCache(e,r){let n=this.listenerCachePerPosition.get(e);n||(n=new Array,this.listenerCachePerPosition.set(e,n)),n.push(r)}getJsonAt(e){return this.modelManager.findAtPosition(e,!1)}applyPluginConfigUpdates(e){if(null!=e)for(const r of e)this.pushChange(this.modelManager.convertToChange(r))}pushChange(e){let r=!1;const n=this.modelManager.applyChange(e);r=this.manageChangeInternally(e);for(const i of n)if(i.type!==e.type||i.position!==e.position){const c=this.manageChangeInternally(i);r=r||c}return r}manageChangeInternally(e){return e.pointer||(e.pointer=this.calculatePointerFor(e.position)),this.receivedChanges.next(e),this.findAndNotify(e,new Map)}findAndNotify(e,r){var n;let i=!1;this.listenerCachePerPosition.get(e.position)||this.listeners.forEach((d,g)=>{this.isInterestedIn(g.position,g.property,e)&&this.addToListenerCache(e.position,d)});const c=this.listenerCachePerPosition.get(e.position);if(null!=c)for(const d of c){let g=!0;const T=r.get(d);if(T)for(const C of T)e.position.startsWith(C)&&(g=!1);else r.set(d,new Array);g&&(i=!0,d.next(e),null===(n=r.get(d))||void 0===n||n.push(e.position))}return i}receiveCommands(e,r){return e?this.createNewListener(e,r):this.receivedChanges}getSchemaManager(){return this.schemaManager}calculatePointerFor(e){return this.schemaManager.generateSchemaPointer(e)}close(){this.receivedChanges.complete()}cleanPosition(e){return(e=e.endsWith("?")?e.substring(0,e.length-1):e).endsWith("/")?e.substring(0,e.length-1):e}clearEmptyListeners(){const e=new Array;for(const r of this.listeners)r[1].observed||e.push(r[0]);for(const r of e)this.listeners.delete(r)}}class et{constructor(){console.debug("Init core"),this.schemaManager=new Ge,this.pluginManager=new Ke,this.previewManager=new ze,this.modelManager=new Oe(this.schemaManager),this.changeManager=new _e(this.schemaManager,this.modelManager),this.storeManager=new te(this.modelManager)}reset(){return this.schemaManager.reset(),this.pluginManager.reset(),this.previewManager.reset(),this.modelManager.reset(),this.changeManager.reset(),this.storeManager.reset(),this}registerPlugin(e){this.pluginManager.registerPlugin(e,this.schemaManager,this.previewManager)}initPlugins(){this.pluginManager.initPlugins(this)}getSchemaUri(){return"schemas/v1/dont-code-schema.json"}getSchemaManager(){return this.schemaManager}getPreviewManager(){return this.previewManager}getStoreManager(){return this.storeManager}getModelManager(){return this.modelManager}getChangeManager(){return this.changeManager}}self.dontCodeCore||(self.dontCodeCore=new et);var Je=self.dontCodeCore;class at{constructor(e,r,n){this.type=e,this.sessionId=r,this.change=n}}var Qe=(()=>{return(f=Qe||(Qe={})).INIT="INIT",f.CHANGE="CHANGE",Qe;var f})();class lt{}class ut{performAction(e){return new Promise(()=>{this.performSynchronousAction(e)})}performSynchronousAction(e){throw new Error("Action "+e+" for "+e.context.valueOf()+" at "+e.position+" not implemented yet")}}class Ae{static clearConfigCache(){this.specialFieldsCache.clear()}static applyFilters(e,...r){return null==r||0==r.length?e:e.filter(n=>{for(const i of r){const c=n[i.name];switch(i.operator){case k.EQUALS:return i.value==c;case k.LESS_THAN:return c<i.value;case k.LESS_THAN_EQUAL:return c<=i.value;default:throw new Error("Operator "+i.operator+" unknown")}}return!0})}static findSpecialFields(e,r){var n,i,c;let d=Ae.specialFieldsCache.get(e);if(null!=d)return d;const g={score:-1,field:null};d=new tt;const T=r.fields;if(null!=T){let C;for(C in T)"Date"===(null===(n=T[C])||void 0===n?void 0:n.type)||"Date & Time"===(null===(i=T[C])||void 0===i?void 0:i.type)?d.addDateField(null===(c=T[C])||void 0===c?void 0:c.name):Ae.scoreIdFieldFromEntityField(T[C],g)}return g.score>0&&(d.idField=g.field),Ae.specialFieldsCache.set(e,d),console.debug("Found special fields for entity at position "+e,d),d}static findSpecialFieldsFromData(e,r){if(null==r.idField&&e?.length>0){const n=e[0],i={score:-1,field:null};let c;for(c in n)Ae.scoreIdFieldFromProperty(c,i);if(i.score>0){const d=e.length>1?e[Math.floor((e.length+1)/2)]:null;(null==d||d[i.field]!=n[i.field])&&(r.idField=i.field)}}}static scoreIdFieldFromEntityField(e,r){return Ae.scoreIdFieldFromProperty(e?.name,r)}static scoreIdFieldFromProperty(e,r){if(null==e)return!1;const n=e.toLowerCase();return"_id"===n?(r.field="_id",r.score=100,!0):("id"==n||"uniqueid"==n||"identifier"==n||"key"==n||"primaryKey"==n||"uniqueKey"==n?r.score<80&&(r.score=80,r.field=e):n.includes("unique")||n.includes("primary")?r.score<50&&(r.score=50,r.field=e):(n.includes("id")||n.includes("key"))&&r.score<30&&(r.score=30,r.field=e),!1)}static cleanUpDataBeforeSaving(e,r){null!=r?.idField&&"_id"!=r?.idField&&e.forEach(n=>{delete n._id})}static cleanUpLoadedData(e,r){null!=r&&(null==r.idField&&Ae.findSpecialFieldsFromData(e,r),e.forEach(n=>{var i;null!=r.idField&&"_id"!=r.idField&&(n._id=n[r.idField]),null===(i=r.dateFields)||void 0===i||i.forEach(c=>{const d=n[c];if(null!=d){let g=Date.parse(d);if(isNaN(g)){const T=d.lastIndexOf("[");-1!=T&&(g=Date.parse(d.substring(0,T)))}isNaN(g)?delete n[c]:n[c]=new Date(g)}})}))}static multiSortArray(e,r){return e}static calculateGroupedByValues(e,r,n,i,c){var d,g;if(null!=r&&null!=r.display){let T=r.of;null!=r.show&&(T=r.show.valueOf());const C=new Map;let D,U=new Map;const ee=r.getRequiredListOfFields();for(const ge of e){if(ge[T]!=D){D=ge[T];const ve=C.get(D);null==ve?(U=new Map,C.set(D,U)):U=ve}for(const ve of ee){let B=U?.get(ve);null==B&&(B=new ft,U.set(ve,B));const ne=ge[ve],le=ne;if(null!=ne)if("object"!=typeof ne||ne instanceof Date||null==n)"number"==typeof le?(null==B.sum&&(B.sum=0),B.sum=B.sum+le,(null==B.minimum||le<B.minimum)&&(B.minimum=ne,B.minAsValue=ne),(null==B.maximum||le>B.maximum)&&(B.maximum=ne,B.maxAsValue=ne),B.count++):(le instanceof Date&&!isNaN(le.getTime())&&(B.sum=null,(null==B.minimum||le.valueOf()<B.minimum.valueOf())&&(B.minimum=ne),(null==B.maximum||le.valueOf()>B.maximum.valueOf())&&(B.maximum=ne)),B.count++);else{B.sum=null==B.sum?structuredClone(ne):n.modifyValues(B.sum,ne,B.metaData,(Re,Ye)=>null!=Re&&null!=Ye?Re+Ye:null==Re?Ye:null==Ye?Re:void 0,i,c);const Pe=n.extractValue(ne,B.metaData,i,c);if(null==B.minimum)B.minimum=ne,B.minAsValue=Pe;else{const Re=B.minAsValue;null!=Pe&&(null==Re||Pe<Re)&&(B.minimum=ne,B.minAsValue=Pe)}if(null==B.maximum)B.maximum=ne,B.maxAsValue=Pe;else{const Re=B.maxAsValue;null!=Pe&&(null==Re||Pe>Re)&&(B.maximum=ne,B.maxAsValue=Pe)}null!=Pe&&B.count++}}}let fe;if(C.size>0){fe=new nt(r,new Map);for(const ge of C.keys()){const ve=C.get(ge);for(const B of Object.values(r.display)){let ne;const le=ve.get(B.of);if(null!=le){switch(B.operation){case Se.Count:ne=le.count;break;case Se.Sum:ne=le.sum;break;case Se.Average:ne=null==le.sum||0==le.count?null:"object"!=typeof le.sum||le.sum instanceof Date||null==n?le.sum/le.count:n.applyValue(structuredClone(le.sum),n.extractValue(le.sum,le.metaData,i,c)/le.count,le.metaData,void 0,i,c);break;case Se.Minimum:ne=le.minimum;break;case Se.Maximum:ne=le.maximum}let Pe=null===(d=fe.values)||void 0===d?void 0:d.get(ge);null==Pe&&(Pe=new Array,null===(g=fe.values)||void 0===g||g.set(ge,Pe)),Pe.push(new st(B,ne))}}}return fe.values.size>0?fe:void 0}}}}Ae.specialFieldsCache=new Map;class ft{constructor(){this.count=0,this.minAsValue=null,this.maxAsValue=null,this.metaData=new Ze}}class tt{constructor(){this.dateFields=null,this.idField=null}addDateField(e){null==this.dateFields&&(this.dateFields=new Array),this.dateFields.push(e)}}class rt{constructor(e,r,n){this.sortedData=e,this.sortInfo=r,this.groupedByEntities=n}}class nt{constructor(e,r){this.groupInfo=e,this.values=r,null==r&&(this.values=new Map)}}class st{constructor(e,r){this.forAggregate=e,this.value=r}}class ot{constructor(e){this.modelMgr=e}safeLoadEntity(e,r){return this.loadEntity(e,r).then(n=>n??Promise.reject("Not found"))}searchEntities(e,...r){return this.listEntities(e).pipe((0,y.map)(n=>Ae.applyFilters(n,...r)))}listEntities(e){return this.searchEntities(e)}searchAndPrepareEntities(e,r,n,i,...c){return this.searchEntities(e,...c).pipe((0,y.map)(d=>null!=i?i.postLoadingTransformation(d):d),(0,y.map)(d=>{let g;return(null!=r||!0===n?.atLeastOneGroupIsRequested())&&(d=Ae.multiSortArray(d,this.calculateSortHierarchy(r,n)),null!=n&&(g=Ae.calculateGroupedByValues(d,n,this.modelMgr))),new rt(d,r,g)}))}calculateSortHierarchy(e,r){let n;return n=null!=r?new we(r.of,void 0,e):e,n}}class Be{static createDeleteChange(e,r,n,i,c){return Be.createAnyChange(W.DELETE,e,r,n,i,null,c)}static createMoveChange(e,r,n,i,c,d,g){const T=Be.createAnyChange(W.MOVE,n,i,c,d,null,g);return T.oldPosition=e,r&&(T.beforeKey=r),T}static createTestChange(e,r,n,i,c,d){return Be.createAnyChange(W.ADD,e,r,n,i,c,d)}static addDummyProviderFromContent(e,r,n){Je.getStoreManager().setProvider(new ct(r,n),e)}static waitUntilTrue(e,r,n,i){Be.waitUntilTrueAndEmit(e,n,i).then(c=>{c?r():r("Timeout waiting for an event")},c=>{r(c)})}static waitUntilTrueAndEmit(e,r,n){return n=n??50,(0,y.firstValueFrom)((0,y.timer)(r=r??50,r).pipe((0,y.take)(n),(0,y.filter)(()=>e()),(0,y.map)(()=>!0)),{defaultValue:!1})}static createAnyChange(e,r,n,i,c,d,g){var T;const C=n?"/"+n:"",D=c?"/"+c:"";let U=i?"/"+i:"";0==r.length&&(U=i||"");let ee=g?"/"+g:"";return 0==r.length&&0==U.length&&(ee=g||""),new he(e,r+C+U+D+ee,d,new ue(r+C+U+D+ee,r+U+ee,r+C+(g?U+D:c?U:""),r+(g?U:""),null!==(T=g??c)&&void 0!==T?T:void 0,null!=g))}}class ct extends ot{constructor(e,r){super(r),this.content=e}canStoreDocument(e){return!1}deleteEntity(e,r){return Promise.reject("Not implemented by Dummy tester")}loadEntity(e,r){return null!=this.content[r]?Promise.resolve(this.content[r]):Promise.reject("Not found")}searchEntities(e,...r){return Array.isArray(this.content)?(0,y.from)([this.content]):(0,y.from)([[this.content]])}storeDocuments(e,r){return(0,y.throwError)(()=>new Error("Not implemented by Dummy tester"))}storeEntity(e,r){return Promise.reject("Not implemented by Dummy tester")}}class vt{constructor(e){this.toRet=e}getJsonAt(e){return this.toRet}receiveCommands(e,r){return new y.Observable}calculatePointerFor(e){return Je.getSchemaManager().generateSchemaPointer(e)}getSchemaManager(){return Je.getSchemaManager()}sendCommand(e){return Promise.resolve(void 0)}}class dt{constructor(){this.name="",this.template=!1,this.description=""}}}}]);